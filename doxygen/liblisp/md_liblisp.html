<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>liblisp: liblisp.md</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">liblisp
   &#160;<span id="projectnumber">v0.6</span>
   </div>
   <div id="projectbrief">A LISP interpreter and library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li class="current"><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('md_liblisp.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title"><a class="el" href="liblisp_8md.html">liblisp.md</a> </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>A small and extensible lisp interpreter and library.</p>
<pre class="fragment">        _ _ _     _ _           
       | (_) |   | (_)          
       | |_| |__ | |_ ___ _ __  
       | | | '_ \| | / __| '_ \ 
       | | | |_) | | \__ \ |_) |
       |_|_|_.__/|_|_|___/ .__/ 
                         | |    
                         |_|    
</pre><h2>Table of contents</h2>
<ol type="1">
<li><a href="#Introduction">Introduction</a></li>
<li><a href="#Design goals">Design Goals</a></li>
<li><a href="#Documentation">Documentation</a></li>
<li><a href="#Building">Building</a></li>
<li><a href="#Deviations from other lisps">Deviations from other lisps</a></li>
<li><a href="#BUGS">BUGS</a></li>
<li><a href="#To Do">To Do</a></li>
<li><a href="#Test programs">Test programs</a></li>
<li><a href="#Manual">Manual</a></li>
<li><a href="#References">References</a></li>
</ol>
<div id="Introduction"> <h2>Introduction</h2>
</div><div id="Introduction"></div><div id="Introduction">This is a lisp interpreter written largely in <a href="https://en.wikipedia.org/wiki/ANSI_C">ANSI C</a>, with some <a href="https://en.wikipedia.org/wiki/C99">c99</a>, it is a non-standard variant of lisp.</div><div id="Introduction"><div id="Design goals"> <h2>Design goals</h2>
</div></div><div id="Introduction"><div id="Design goals"></div></div><div id="Introduction"><div id="Design goals">A summary of the design goals:</div></div><div id="Introduction"><div id="Design goals"><ul>
<li>Simple and Small (~ 5000 lines of code)</li>
<li>Extensible</li>
<li>No implicit state</li>
<li>Used as a generic utility library</li>
</ul>
</div></div><div id="Introduction"><div id="Design goals">The following functionality would be nice to put in to the core interpreter; Support for matrices and complex numbers (c99 _Complex), UTF-8 support, text processing (diff, grep, sed, Ã  la perl), map and looping constructs from scheme, doc-strings, optional parsing of strings and float, apply, proper constants and a prolog engine.</div></div><div id="Introduction"><div id="Design goals">But this is more of a wish list than anything. Complex number support has been added in a branch of the <a href="https://git-scm.com/">git</a> repository. Another interesting possibility would be to use a big memory pool and allocate objects from that, pointers would be replaces with indexes into this table, it would make saving the state of the interpreter and restoring it a lot easier, plus would allow for more advanced memory management in a portable way.</div></div><div id="Introduction"><div id="Design goals">There are a lot of things that need tidying up and rethinking about, especially when it comes to the interface of the library and the naming of functions. More comments are also in order in the code explaining what the code is meant to achieve is also in need.</div></div><div id="Introduction"><div id="Design goals"><h3>Rationale</h3>
</div></div><div id="Introduction"><div id="Design goals"></div></div><div id="Introduction"><div id="Design goals"><ul>
<li>Simple and Small (~ 5000 lines of code)</li>
</ul>
</div></div><div id="Introduction"><div id="Design goals">The interpreter and the language should be simple to understand. It provides more of a DIY lisp environment where most facilities are not provided but are up to the users to implement. The interpreter is currently slightly over 5000 lines in of C formatted with "GNU indent", and under it with the way I like the code formatted.</div></div><div id="Introduction"><div id="Design goals">The count does not include the modules, experimental code or the unit tests in <a href="unit.c">unit.c</a> and these are not part of the core interpreter, these should grow as large as possible!</div></div><div id="Introduction"><div id="Design goals"><ul>
<li>Extensible</li>
</ul>
</div></div><div id="Introduction"><div id="Design goals">The core language is very small, with few primitive operations, as such it needs to be extensible. New primitive functions needed be added by library users, code fragments evaluated and even new types need adding.</div></div><div id="Introduction"><div id="Design goals"><ul>
<li>No implicit state</li>
</ul>
</div></div><div id="Introduction"><div id="Design goals">It should be possible to run multiple instances of the interpreter in the same address space, this requires no implicit or hidden state in the interpreter design, which impedes multiple instances running at once. There is currently is hidden state which is needed by the module system to function; there is a single global lisp environment that each module adds its code to when it is loaded.</div></div><div id="Introduction"><div id="Design goals">If the module system is not used then multiple lisp interpreters can be run in different threads. This could be remedied if instead of the modules having constructors and destructors that add their functions into a global environment the lisp environment acquired a function with "dlsym", which would have to be part of the module specification and have a fixed name, and passed in the lisp environment it was operating on to that function.</div></div><div id="Introduction"><div id="Design goals"><ul>
<li>Used as a generic utility library</li>
</ul>
</div></div><div id="Introduction"><div id="Design goals">The library includes routines that might be useful in other programs that it could have chosen not to expose, mostly relating to I/O and strings.</div></div><div id="Introduction"><div id="Design goals"><ul>
<li>Portable</li>
</ul>
</div></div><div id="Introduction"><div id="Design goals">The core library is written in C99, as such it should compile anywhere. Only a very small wrapper around the library is needed to make a working interpreter.</div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"> <h2>Documentation</h2>
</div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation">The header <a href="liblisp.h">liblisp.h</a> contains all the documentation (in doxygen format) relating to the API. The rational for this being the API document is that there is only one document to maintain, as opposed to it and a <a href="liblisp.3">liblisp.3</a> to keep in sync. The <a href="liblisp.3">liblisp.3</a> that is present simply points the user to the <a href="liblisp.h">liblisp.h</a> header.</div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"> <h2>Building</h2>
</div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building">To build the interpreter a C compiler for a hosted platform is needed. It has no other dependencies apart from the C library. A makefile is provided, but the following commands should all work for their respective compilers: </p><pre class="fragment">    gcc   *.c -o lisp
    tcc   *.c -o lisp
    clang *.c -o lisp
</pre></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building">The preprocessor defines that add or change functionality are: </p><pre class="fragment">    USE_DL:   
            Add the dynamic loader interface
    NDEBUG:    
            The interpreter liberally uses assertions, this
            disables them.
    USE_INITRC:
            Add functionality to read from an initialization
            file ("~/.lisprc" or "%HOMEPATH%\.lisprc").
    USE_ABORT_HANDLER
            This adds a handler for the SIGABRT, which is
            raised by assert(). It adds a signal handler
            which catches the signal, prints out a stack
            trace using backtrace from "execinfo.h" and then
            continues with the abort.
</pre></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building">Using the makefile instead (either "make" or "make all") will build the "lisp" executable as well as the "liblisp.a" library. It will also build "liblisp.so" The libraries will be built with debugging symbols.</div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building">The line editing library is limited to Unix systems which support a <a href="https://en.wikipedia.org/wiki/VT220">VT220</a> terminal emulator (or are lucky enough to the actual terminal hooked up!), which should be all of them. It may also work with POSIX compatibility layers such as <a href="https://www.cygwin.com/">Cygwin</a>, but this has not been tested. The repository is set up a fork of the <a href="https://github.com/antirez/linenoise">linenoise</a> library that is simply called <a href="https://github.com/howerj/libline">libline</a>, this has limited support for <a href="https://en.wikipedia.org/wiki/Vi">"Vi"</a> like key bindings. This is compiled as a module and will only be loaded if compiled the lisp interpreter has been compiled with "USE\_DL", and if the line editing library is available on your platform.</div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building">Color support can be optionally enabled on all output channels and is reliant on <a href="https://en.wikipedia.org/wiki/ANSI_escape_code#Colors">ANSI escape codes</a> on the terminal being displayed correctly. If it is not simply do not enable color, it is only a minor feature.</div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"> <h2>Deviations from other lisps</h2>
</div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><ul>
<li>Case sensitivity</li>
</ul>
</div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps">Case sensitivity is both easier to implement, more general and allows information to be encoded in case, much like in language with acronyms. If the implementation were to be case insensitive the question of what character encoding and sets we use would come up, we might design a lisp which is case insensitive with the Latin alphabet, but why not with the Cyrillic alphabet also?</div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><ul>
<li>Does not follow any standards</li>
</ul>
</div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps">As this implementation does not follow any standards there are bound to be general behaviors and corner cases that are out of line with other standards implementation, or are combinations of behaviors from other standards. The implementation is the standard for now, which is a downside.</div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><ul>
<li>'#' as comments as well as ';'</li>
</ul>
</div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps">Another major deviation is that comments are represented by '#' as well as ';' so that source code can easily be run as a Unix script with no special syntax in the usual manner.</div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><ul>
<li>Subtly different functions</li>
</ul>
</div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps">Functions may behave differently from those with the same name defined in another language.</div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><ul>
<li>F-Expressions</li>
</ul>
</div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps">As they were easy to add, F-expressions were added.</div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"> <h2>BUGS</h2>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>If you manage to get a SEGFAULT then there is a bug in the code somewhere. It should not be possible to make the interpreter seg-fault.</li>
<li>See the "@todo" comments at the top of <a href="liblisp.c">liblisp.c</a> to see a full list of bugs as well comments labeled with "@bug". "@warning" is also used in certain cases, but as a warning to the programmer modifying the interpreter.</li>
<li>"@note" also exits, they may be weaker forms of "@todo", or just notes.</li>
<li>The code is formatted in an odd way, but I like it, it is simple enough to change however by using GNU indent.</li>
<li>Many line lengths in the C file exceed 80 characters (about 209 lines at the moment).</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><h3>Implementation limits</h3>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">All implementation limits are in the bugs section, because that's what they are.</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>Maximum length of a string is 4GB</li>
<li>Maximum number of user defined types is at least 255</li>
<li>Non thread safe functions and lisp subroutines</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">There are several functions that are not thread safe, a consequence of their implementation in the C library that cannot be worked around in a portable manner. These functions should be marked in their "docstring" as being so, the following is a list of functions that are known to be unsafe: </p><pre class="fragment">    date
    getenv
    locale!
</pre></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">The interpreter as built from from <a href="main.c">main.c</a> is also not thread safe, it relies on the existence of a global lisp environment being available. While another instance of the lisp interpreter could be run it should use any modules.</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>Maximum recursion limits for evaluation, printing and regular expression matching.</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">Currently the interpreter cannot print out expressions</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><h3>Design Faults</h3>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>Using the C stack</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">Instead of using the C stack for the interpreter stack it would have been much better to use a heap allocated stack, this would mean closure could be implemented easily and portably. Not only this but the stack could grow without worrying about overflow.</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>Making a pure interpreter instead of a register machine</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">A pure interpreter is easy to implement, but limited, it would be better to make a lisp interpreter based around a register machine built for executing lisp.</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>Using pointers</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">If indexes into arrays (or data and function pointers) it would be easier to store program state as an image, which is a nice feature. It would mean that memory usage could be brought down a lot in a <em>portable</em> manner.</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>F-Expressions</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">F-Expressions are very easy to implement, but very difficult to use, a proper macro system should be implemented instead of relying on F-Expressions.</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><h3>Testing and bug mitigation</h3>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">There are a few methods used (or aspired to) in this interpreter when it comes to mitigating bugs, documentation, profiling the code, and hopefully catching bugs introduced due to refactoring.</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>Unit Tests</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">There are two parts to the unit test frame work, a C program that calls functions directly out of the library and unit test code written in lisp. The aim of the C program is to test all of the functions that can reasonably be tested by it (the higher level REPL functions will have to be tested by the lisp code and the user).</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>Valgrind</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">Valgrind is used regularly to catch memory leaks. Currently the interpreter does not contain any known memory leaks, however some modules do leak memory, it is unclear if the modules themselves of the libraries they link against are responsible for the leaks.</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>Doxygen</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">Doxygen is used to document most of the function interfaces (and all public ones), create a "to-do" list, a list of known bugs, make notes and provide a list of warnings to the programmer. It generates a list of warnings, which is logged to "doxygen.log".</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>Gprof</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">"gprof" has been used and has helped find and remedy the highest offenders in terms of sloth (assoc).</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>Gcov</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">"gcov" has not been used at the moment, either for profiling or coverage tests, this could be used in conjunction with the unit test framework to make sure it covers a high percentage of the code base.</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>Splint</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">Using splint (3.1.2) has been unsuccessful, it fails to parse most of the C files correctly and so cannot produce any warnings. The "-weak" setting would be used as there is no intention to mark up the source code with splint type information.</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><ul>
<li>Asserts</li>
</ul>
</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS">Asserts are used throughout the code base, in fact disabling them gives about a 10-20% speed boost. When changes are made, asserts have prevented subtle corruption and provided hints as to where the problem has occurred, failing fast and quickly instead of giving the impression that a change might have been successful.</div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"> <h2>To Do</h2>
</div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do">There are several issues that need resolving with the interpreter.</div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><h4>liblisp</h4>
</div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><ul>
<li>Environment lookup should be split into top level hash and cons list for efficiency.</li>
<li>The "struct hack" could be applied strings and other types, as well as the length field being encoded in the variable length section of the object.</li>
<li>File operations on strings could be improved. An append mode should be added as well. freopen and/or opening in append mode need to be added as well.</li>
<li>Memory handling on Out of Memory conditions should be rethought, perhaps a test bench using a custom malloc (wrapper) could be made and used to inject arbitrary Out of Memory conditions.</li>
<li>Anonymous recursion would be a good thing to have.</li>
<li>The semantics of the default IO port to <b>print</b> and <b>format</b> to be worked out when it comes to printing color and pretty printing.</li>
<li>There is currently no decent way of handling binary data, strings could be changed so that they could, but this would require reworking the entire interpreter. Not only that, all string operations are pure, there is no way to mutate strings.</li>
<li>Modules for matrix arithmetic should be added.</li>
<li>Macros are probably better than F-Expressions...</li>
</ul>
</div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"> <h2>Test programs</h2>
</div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs">The simple C test program is as follows: </p><pre class="fragment">    #include &lt;liblisp.h&gt;
    int main(int argc, char **argv)
    {
            return main_lisp(argc, argv);
    }
</pre></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs">This does not show case the API but gives you a usable REPL to play with.</div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs">Or in C++: </p><pre class="fragment">    #include &lt;iostream&gt;
    #include &lt;liblisp.h&gt;
    using namespace std;
    int main(int argc, char **argv)
    {
            cout &lt;&lt; "(cpp-test)" &lt;&lt; endl;
            return main_lisp(argc, argv);
    }
</pre></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs">The executable can read from files, "stdin" or evaluating strings. There is a manual page for this interpreter, unlike for the header.</div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"> <h1>Manual</h1>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This is the manual for the language defined by this library. It does not include any initialization code (that is lisp code that has been defined in lisp and not in C and then passed to the interpreter on start up), but only that language provided by <a href="liblisp.c">liblisp.c</a> and <a href="main.c">main.c</a>.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The module system and some of the modules functions shall also be explained in depth.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3><a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29">Lisp</a></h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29">Lisp</a> is the second oldest language after <a href="https://en.wikipedia.org/wiki/Fortran">FORTRAN</a> that still has descendants still in use. Despite its age it is a very high level language built on simple principles; it had features that are now finding their way into newer programming languages such as the <a href="https://en.wikipedia.org/wiki/Anonymous_function">lambda procedure</a>. It is a multi-paradigm programming language built around a few core concepts:</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ol type="1">
<li><a href="https://en.wikipedia.org/wiki/S-expression">S-Expressions</a></li>
<li><a href="https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29">Garbage Collection</a></li>
<li>A mostly functional style of programming.</li>
</ol>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">And their are various minor attributes that could also be said about the language as well.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The first point however is very important, in <a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29">Lisp</a> code and data are represented in the same way, by the <a href="https://en.wikipedia.org/wiki/S-expression">S-Expression</a>. Naturally any programming language is going to have primitives and procedures for handling the data types it is built to work with; <a href="https://en.wikipedia.org/wiki/MATLAB">MATLAB</a> is good at handling matrices, <a href="https://en.wikipedia.org/wiki/AWK">AWK</a> with its associative arrays and regular expressions is good with strings, <a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29">Lisp</a> is good at handling <a href="https://en.wikipedia.org/wiki/S-expression">S-Expressions</a>.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Given the statements that:</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ol type="1">
<li>In <a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29">Lisp</a> code and data have the same format, <a href="https://en.wikipedia.org/wiki/S-expression">S-Expressions</a>.</li>
<li><a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29">Lisp</a> is designed to process <a href="https://en.wikipedia.org/wiki/S-expression">S-Expressions</a>.</li>
</ol>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">It follows that <a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29">Lisp</a> must be good at, or at least able to; read in, manipulate, generate and write out <a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29">Lisp</a> programs with relative ease. It can also evaluate these expressions at run time. To put it another way; it is possible to write <a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29">Lisp</a> programs that write <a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29">Lisp</a> programs.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The second important point, <a href="https://en.wikipedia.org/wiki/Garbage_collection_%28computer_science%29">Garbage Collection</a>, means that the programmer does not have to worry about how objects are allocated or cleaned up, but it does come at a price. The collector used here is a simple stop-the-world <a href="http://c2.com/cgi/wiki?MarkAndSweep">mark and sweep</a> collector, this may add pauses at seemingly random times throughout the programs execution.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The third point mostly is the least important, but means that techniques such as <a href="https://en.wikipedia.org/wiki/Recursion_%28computer_science%29">recursion</a> (with <a href="https://en.wikipedia.org/wiki/Tail_call">tail call</a> optimization in this implementation) are preferred and functions with <a href="https://en.wikipedia.org/wiki/Side_effect_%28computer_science%29">side effects</a> are discouraged.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Some of these points are more historically important, most new languages now have garbage collection. Lisp also was one of the first languages to have a <a href="https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop">REPL</a>, again many new languages also have this feature. REPL stands for Read-Evaluate-Print-Loop and this is what the interpreter does, it reads in a lisp expression, evaluates it, prints the result and loops to the beginning to read in a new expression. This gives instant feedback on whether an operation worked or now.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h2>Style</h2>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Code examples will be presented as follows: </p><pre class="fragment">    # Comments start with a '#' and end when the line does here =&gt;
    # The '&gt;' represents the prompt at which we can interactively
    # type expressions
    &gt;
    &gt; (+ 2 2) # "(+ 2 2)" is an expression
    4         # This is the return value of the evaluated expression
              # note the lack of the '&gt;' prompt.
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">All expressions return values in lisp, which will then be printed out in the REPL, this will not be shown however for all output </p><pre class="fragment">    &gt; (+ 2 2) # we already know this will print out 4 from above
    &gt; (+ 3 3)
    6 # we show the new and exciting result
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The canonical <a href="http://www.catb.org/jargon/html/M/metasyntactic-variable.html">metasyntactic variables</a> will be used in the text; "foo", "bar" and "baz" represent arbitrary expressions or atoms, changing depending on the context.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Runs of <em>car</em> and <em>cdr</em> will be abbreviated, although the functions that implement them might not be defined, examples as follows; </p><pre class="fragment">    &gt; caar
    (lambda (x) (car (car x)))
    &gt; cdar
    (lambda (x) (cdr (car x)))
    &gt; cadr
    (lambda (x) (car (cdr x)))
    &gt; cddr
    (lambda (x) (cdr (cdr x)))
    &gt; caaddar
    (lambda (x) (car (car (cdr (cdr (car x))))))
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Reading from left to right, an "a" adds a <em>car</em> and a "d" adds a cdr to the front of the function.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">How these are defined and what they mean will be talked about in later chapters, they will have to be defined by the user if only the base library defined in <a href="liblisp.c">liblisp.c</a> is used and can be done so in terms of <em>car</em> and <em>cdr</em>.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h2>An introduction to the interpreter</h2>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The lisp interpreter is a thin wrapper around the liblisp library, it adds functionality to load compiled modules into the running executable image and then runs the interpreter. What it does after this is controlled by by the arguments passed into the lisp library program. As much functionality is the same regardless of what system you are running the interpreter on, this cannot be said to be the same case for the loaded in modules which might exist only on a subset of the support platforms.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Command line arguments</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The options that can be passed into the lisp interpreter are as follows (taken from the man-pages):</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>-h</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Print out the usage string and exit successfully.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>-c Turn on colorization of printed out S-Expressions, it assumes your terminal can handle ANSI color codes. If it cannot do not select this option. It does no checking for whether it is writing to terminal or not with isatty(3).</li>
<li>-p</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This will turn the prompt on, by default no prompt is given when typing so as to allow output to be piped to other programs following the "No news is good
news" Unix maxim.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>-E</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This will turn on the line editor when reading from stdin.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>-H</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">If an error is encountered the interpreter will be halted rather than trying to recover.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>-i file</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This option allows the user to supply a file name that would otherwise look like an argument to the lisp interpreter, for example if the file name began with a "-" character.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>&ndash; file Same as "-i".</li>
<li>-e string Evaluate a string as input, this disables reading from stdin(3).</li>
<li>-o file Open "file" and redirect output to it.</li>
<li>file An argument that is not preceded by a valid option that takes an argument is treated as a file to be read from. Reading from a single file disables reading from stdin(3).</li>
<li>-</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This forces reading from stdin(3). By default the interpreter will read from stdin(3) but this behavior is disabled if an argument has been evaluated with "-e" or a file has been read in.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">If no file is given the interpreter reads input from stdin(3), if one is given then the interpreter will exit after having read all input files or evaluated all strings.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Arguments are read in order and executed as soon as they are encountered.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">As an example: </p><pre class="fragment">    $ ./lisp -Epc init.lsp -
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Will run the lisp interpreter, turn on the line editor (if available), turn the printing out the prompt on, and colorize the output to standard out. It will then read in and evaluate all the expressions in the file "init.lsp", after it has done that it will start an interactive session with the user.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>Command line interface<ul>
<li>The line editor and line history</li>
</ul>
</li>
<li>The REPL</li>
<li>Command line options</li>
<li>Environment variables used<ul>
<li>HOME</li>
</ul>
</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h2>Interpreter internals</h2>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>C API</li>
<li>Interpreter Internals<ul>
<li>Types</li>
<li>Initialization</li>
<li>Description of files</li>
</ul>
</li>
<li>User defined primitive functions or "subr"s.</li>
<li>User defined types</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h2>An introduction to the language</h2>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This is a short introduction to the language, other very good sources of information about specific lisp implementations include:</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ol type="1">
<li><a href="http://www.schemers.org/Documents/Standards/R5RS/">http://www.schemers.org/Documents/Standards/R5RS/</a></li>
</ol>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This is one of the scheme standards, at roughly 50 pages it is very small but it describes a useful, usable language. <a href="https://en.wikipedia.org/wiki/Scheme_%28programming_language%29">Scheme</a> is one of the two popular dialects of lisp. Scheme aims at being small and elegant.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ol type="1">
<li><a href="https://mitpress.mit.edu/sicp/">https://mitpress.mit.edu/sicp/</a></li>
</ol>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The Structure and Interpretation of Computer Programs. A well known introductory book on Scheme.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ol type="1">
<li><a href="http://www.lispworks.com/documentation/HyperSpec/Front/index.htm">http://www.lispworks.com/documentation/HyperSpec/Front/index.htm</a></li>
</ol>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><a href="https://en.wikipedia.org/wiki/Common_Lisp">Common Lisp</a> is the other major dialect of lisp, it is a huge language and is the other major dialect of lisp.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ol type="1">
<li><a href="http://shrager.org/llisp/index.html">http://shrager.org/llisp/index.html</a></li>
</ol>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">There are many dialects of lisp, both historical and current, this is a defunct dialect that has a nice tutorial.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Built in types</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>Strings<ul>
<li>Normal Strings</li>
<li>"Characters"</li>
</ul>
</li>
<li>Floats</li>
<li>Integers</li>
<li>Symbols<ul>
<li>Interned symbols</li>
</ul>
</li>
<li>Functions<ul>
<li>Subroutines</li>
<li>Lambdas</li>
<li>F-Expressions</li>
</ul>
</li>
<li>Hashes</li>
<li>Ports</li>
<li>User defined types</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Atoms</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">An atom is the simplest data structure available to the lisp environment, it is a primitive data structure; lists are composed of collections of atoms and other lists and an atom cannot further be divided into smaller lists or atoms.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Atoms usually evaluate to themselves, apart from symbols which evaluate to another atom or expression depending on the environment.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">For example: </p><pre class="fragment">    &gt; 2.0             # Floating point numbers are self evaluating
    2.0
    &gt; 2               # Integer numbers are self evaluating
    2
    &gt; +
    &lt;SUBR:4231056&gt;    # Evaluates to an internal subroutine
    &gt; '+
    (quote +)         # quote postpones evaluation
    &gt; "Hello, World!" # strings are self evaluating
    "Hello, World!"
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Atoms can have different types, such as a hash, an IO port, a number, a string, and a floating point number. They will be colorized differently depending on what they are.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>CONS cells</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The <a href="https://en.wikipedia.org/wiki/Cons">cons cell</a> is the basic data structure from which lists and trees, and so most structured data in this lisp apart from <a href="https://en.wikipedia.org/wiki/Associative_array">associative arrays</a>, are built. The <em>cons</em> subroutine is used to allocate and build new cons cells and lists.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">A cons cell consists of two cells, each of which can hold either a pointer to other cons cells or data. Each cell will contain a few bits to determine what the data is, or whether it is a pointer, as well as for other purposes such as garbage collection.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The proper list: </p><pre class="fragment">    (1 2 3)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Looks like this in memory: </p><pre class="fragment">      CAR   CDR
    .-----.-----.     .-----.-----.     .-----.-----.
    |  1  | PTR |----&gt;|  2  | PTR |----&gt;|  3  | NIL |
    .-----.-----.     .-----.-----.     .-----.-----.
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The first cell in the pair is called the "car" cell and the second the "cdr" cell for historical reasons. "PTR" represents a pointer to another cell and "NIL" represents the "nil" symbol, which is used to terminate a proper list.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Lists which are not terminated by a "nil" can also be made, they are called <a href="http://c2.com/cgi/wiki?DottedPairNotation">dotted pairs</a>.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The <a href="http://c2.com/cgi/wiki?DottedPairNotation">dotted pair</a>: </p><pre class="fragment">    (1 . 2)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Looks like this: </p><pre class="fragment">    .-----.-----.
    |  1  |  2  |
    .-----.-----.
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Lists that end with a <a href="http://c2.com/cgi/wiki?DottedPairNotation">dotted pair</a> can also be made: </p><pre class="fragment">    (1 2 . 3)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Looks like this: </p><pre class="fragment">    .-----.-----.     .-----.-----.
    |  1  | PTR |----&gt;|  2  |  3  |
    .-----.-----.     .-----.-----.
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><a href="https://en.wikipedia.org/wiki/Tree_%28data_structure%29">Trees</a> can also be made, the tree: </p><pre class="fragment">    (1 (2 3) 4)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Looks like this: </p><pre class="fragment">                      .-----.-----.     .-----.-----.
                      |  2  | PTR |----&gt;|  3  | NIL |
                      .-----.-----.     .-----.-----.
                         ^
                         |
    .-----.-----.     .-----.-----.     .-----.-----.
    |  1  | PTR |----&gt;| PTR | PTR |----&gt;|  4  | NIL |
    .-----.-----.     .-----.-----.     .-----.-----.
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Arbitrary lists and trees can be constructed.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>List Manipulation</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The lists shown above can be manipulated and created with built in functions. To create new cons cells and list, <em>cons</em> is used, it takes to arguments and returns a new list. </p><pre class="fragment">    &gt; (cons 1 2)
    (1 . 2)
    &gt; (cons 1 (cons 2 3))
    (1 2 . 3)
    &gt; (cons 1 (cons 2 (cons 3 nil)))
    (1 2 3)
    &gt; (cons (cons 1 2) (cons 3 nil))
    ((1 . 2) 3)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The cells in a cons pair can be accessed with the <em>car</em> and <em>cdr</em> functions, the <em>car</em> function gets the first element in the pair, the <em>cdr</em> function gets the second cell. </p><pre class="fragment">    &gt; (car (cons 1 2))
    1
    &gt; (cdr (cons 1 2))
    2
    &gt; (car (cons 1 (cons 2 3)))
    1
    &gt; (cdr (cons 1 (cons 2 3)))
    (2 . 3)
    &gt; (car (cons 1 (cons 2 (cons 3 nil))))
    1
    &gt; (cdr (cons 1 (cons 2 (cons 3 nil))))
    (2 3)
    &gt; (car (cons (cons 1 2) (cons 3 nil)))
    (1 . 2)
    &gt; (cdr (cons (cons 1 2) (cons 3 nil)))
    3
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Evaluation and Evaluation of Special Forms</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The evaluation of lisp expressions is very simple, but there are some exceptions known as special forms. The standard evaluation rule is quite simple, any variable in the first position of a list is treated as a function to apply, the arguments to the function are first evaluated recursively then feed into the function.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Function and variable definition</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">New functions and variables can be defined and they can be defined in global or a lexical scope.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Control structures and recursion</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>recursion</li>
<li>loop</li>
<li>return</li>
<li>cond</li>
<li>if</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Association lists</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>Normal association Lists</li>
<li>Extended association list (with hashes)</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Fexprs</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">An <a href="https://en.wikipedia.org/wiki/Fexpr">fexpr</a> is a function, user defined or an internal, whose arguments are passed into it unevaluated, allowing them to be evaluated or many times or not at all within the <a href="https://en.wikipedia.org/wiki/Fexpr">fexpr</a>. They have fallen out of favor within lisps as they defy code optimization techniques which is not a concern in this implementation as none are performed (beyond optimizing <a href="https://en.wikipedia.org/wiki/Tail_call">tail calls</a>).</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Example code</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Example code and be found in the repository the library is hosted in;</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li><a href="init.lsp">init.lsp</a></li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This contains initialization code to the make the lisp interpreter much more friendly, usable even. It contains code that acts as wrappers around primitives, functions for manipulating <a href="https://en.wikipedia.org/wiki/Set_theory">sets</a>, basic mathematical functions such as <a href="https://en.wikipedia.org/wiki/Factorial">factorial</a> and <a href="https://en.wikipedia.org/wiki/Greatest_common_divisor">gcd</a>, and functions for operating on lists.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li><a href="meta.lsp">meta.lsp</a></li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This contains a <a href="https://en.wikipedia.org/wiki/Meta-circular_evaluator">Meta-circular Evaluator</a>, as defined in <a href="ldc.upenn.edu/myl/llog/jmc.pdf">The Roots of Lisp</a>.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li><a href="test.lsp">test.lsp</a></li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This contains a test suite, with limited coverage, for <a href="init.lsp">init.lsp</a>. It should be run after <a href="init.lsp">init.lsp</a> is, it will exit the interpreter if any of the tests fail.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h2>Debugging</h2>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The implementation has a few methods for debugging the code, beyond the power of the REPL.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">To view the definition of an expression we can type it at the prompt: </p><pre class="fragment">    # define a function to calculate the
    # Greatest Common Denominator
    &gt; (define gcd (lambda (x y) (if (= 0 y) x (gcd y (% x y)))))
    (lambda (x y) (if (= 0 y) x (gcd y (% x y))))
    &gt; gcd
    (lambda (x y) (if (= 0 y) x (gcd y (% x y))))
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Unfortunately this does not apply to built in functions, it would be nice to print out the C functions that compose the language primitives but it would be too much work for too little reward, instead an indication that the object is somehow <em>special</em> is printed out: </p><pre class="fragment">    &gt; (+ 2 2)
    &gt; +             # What is the definition of '+'?
    &lt;SUBR:4228480&gt;  # Unfortunately the C code would have to
                    # be consulted "&lt;SUBR:" indicates that this
                    # is a built in language primitive the "4228480"
                    # is the pointer at which the function lives in
                    # the lisp executable.
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Subroutines and "IO" types are unprintable types, they have no sensible representation that could be printed out to the screen so are instead shown as some detail about the object and a pointer to where it lives (that means nothing to the user of the REPL apart to distinguish between two specific objects). Effort has been made to reduce the number of types that cannot be printed to a minimum.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">User defined types may have been provided with a function to print them out, if so it is used, if not then: </p><pre class="fragment">    &lt;USER:pointer&gt;
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">is printed, where <em>pointer</em> is an internal pointer to that object. "IO" types are similar: </p><pre class="fragment">    &gt; (open *file-out* "test.log") # open up a file for writing
    &lt;IO:OUT:37908656&gt;              # returned unprintable IO type, output
    &gt; (open *file-in* "test.log")  # open up a file for reading
    &lt;IO:IN:37909776&gt;               # returned unprintable IO type, input
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">As much useful information about the object will be printed.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Tracing</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Error messages</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h2>List of primitives, special forms and predefined symbols</h2>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Here follows a complete list of all symbols and primitives used within the library and their behavior.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Special forms and variable</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"> <pre class="fragment">    nil                Nil, the object representing false
    t                  True, the object representing true

    quote              Return an unevaluted expression
    if                 Conditional evaluation
    lambda             Create a lambda procedure
    flambda            Create an "fexpr"
    define             Define a new variable with a value
    set!               Change an already defined variables value
    progn              Evaluate a sequence of S-Expression, return the last
    cond               Conditional evaluation
    let                Create a new variable scope, allowing recursion
    error              Error, an object representing an error
    loop               Jump back to beginning of a progn
    return             Return early from a progn
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h4>Special variables</h4>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">There are several special variables used within the interpreter.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>nil <pre class="fragment">  &gt; nil
  ()
  &gt; ()
  ()
  &gt; (cdr '(a))
  ()
</pre></li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Represents false and the end of a list. Can also be written as '()'.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>t <pre class="fragment">  &gt; t
  t
</pre></li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Represents true, evaluates to itself.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h4>Special forms</h4>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>quote</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Quote returns an unevaluated expressions so expressions can be programmatically manipulated. </p><pre class="fragment">    (quote EXPR)
    'EXPR
    # Examples:
    # Expression to evaluate.
    &gt; (+ 2 2)
    4
    # Postpone evaluation of an expression.
    &gt; (quote (+ 2 2)) # (+ 2 2) is not evaluated.
    (+ 2 2)           # Returns the unevaluated expression
    # '(+ 2 2) is equivalent to (quote (+ 2 2))
    &gt; '(+ 2 2)
    (+ 2 2)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>if</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The "if" special form expects three expressions, if the first evaluates to true (which is any value apart from 'nil') then it returns the second expression after evaluation. If that test evaluated to false (that is to 'nil') then it returns the third expression after evaluation. Only the test and the expression to be returned are evaluated. </p><pre class="fragment">    (if TEST EXPR EXPR)
    # Examples:
    &gt; (if t 1 2)
    1
    &gt; (if nil 1 2)
    2
    &gt; (if "hello" 1 2)
    1
    &gt; (if 0 'a 'b) # 0 is not 'nil', it evaluates to true here!
    a # return 'a' because 0 is true in this context.
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>lambda</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Create a new <a href="https://en.wikipedia.org/wiki/Anonymous_function">lambda procedure</a> or anonymous function that can be applied, assigned to a label and passed around like any other expression. The arguments to the procedure are evaluated before they are passed in. </p><pre class="fragment">    (lambda (VARIABLE VARIABLE ...) EXPR)
    # Examples:
    &gt; ((lambda (x) (* x x)) 4)
    16
    &gt; (define square (lambda (x) (* x x)))
    (lambda (x) (* x x))
    &gt; (square -5)
    25
    &gt; (square (+ 2 3))
    25
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>flambda</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Create a new <a href="https://en.wikipedia.org/wiki/Fexpr">fexpr</a>, this is similar to a <a href="https://en.wikipedia.org/wiki/Anonymous_function">lambda procedure</a> except all the arguments are turned into a list and bound to a single variable. The arguments are <em>not</em> evaluated when they are passed in. </p><pre class="fragment">    (flambda (VARIABLE) EXPR)
    # Examples:
    &gt; (define print-me (flambda (x) x))
    (flambda (x) x)
    &gt; (print-me hello 'world (+ 2 2))
    (hello (quote world) (+ 2 2))
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This allows the creation of functions that evaluate can delay, not or reevaluate their arguments.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>define</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Adds a symbol value pair to the global namespace. It evaluates the argument that will become the value first. </p><pre class="fragment">    (define EXPR EXPR)
    # Examples:
    &gt; (define foo 3)
    3
    &gt; foo
    3
    &gt; (+ foo foo)
    6
    &gt; (define bar (* 9 9)) # Note (* 9 9) is evaluated.
    81
    &gt; bar
    81
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>set!</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Change the value of an already defined variable to another value. </p><pre class="fragment">    (set! EXPR EXPR)
    # Examples:
    &gt; (define a 1)
    1
    &gt; a
    1
    &gt; (set! a 2)
    2
    &gt; a
    2
    &gt; (set b 3)
    (error 'eval 'set! "undefined variable" '(b 3) "liblisp.c" 1238)
    error
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>begin</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Sequence a list of expressions for evaluation; expressions are evaluated from left to right and only the value of the last expression is returned. </p><pre class="fragment">    (begin)
    (begin EXPR ...)
    # Examples:
    &gt; (begin)
    ()
    &gt; (begin (+ 1 1) "hello" (+ 2 2))
    4
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>cond</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Given pairs of expressions it evaluates the first expression in the pair and if it returns true it will return the second value in the pair after it is evaluated. It will continue along the list until one of the first values in the pairs evaluates to true, if none do it will return nil. </p><pre class="fragment">    (cond)
    (cond (EXPR EXPR) ...)
    # Examples:
    &gt; (cond)
    ()
    &gt; (cond (nil 1) (nil 2))
    ()
    &gt; (cond (nil 1) (t 2) (nil 3))
    2
    &gt; (cond (nil 1) ((if 'a t nil) 2) (t 3))
    2
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>let</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Creates new temporary local bindings for variables and evaluates expressions with them. The SYMBOL is defined first, then the VALUE is evaluated, which is then bound to the SYMBOL. The upshot of all that is now recursive procedures can be given local scope. In other dialects of lisp this special form would be called <em>letrec</em> instead. </p><pre class="fragment">    (let (SYMBOL VALUE) (SYMBOL VALUE) ... EXPR)

    # Examples:
    &gt; (let
       (factorial (lambda
        (x)
        (if
         (&lt; x 2) 1
         (* x
          (factorial
           (- x 1))))))
       (factorial 6))
    720
    &gt; (define f
       (let
        (factorial (lambda
         (x)
         (if
          (&lt; x 2) 1
          (* x
           (factorial
            (- x 1))))))
        factorial)
    &gt; (f 6)
    720
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>error</li>
<li>loop</li>
<li>return</li>
<li>compile</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Built in subroutines</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The following is a list of all the built in subroutines that are always available.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>&amp;</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Perform the bitwise and of two integers. </p><pre class="fragment">    # (&amp; INT INT)
    &gt; (&amp; 1 1)
    1
    &gt; (&amp; 3 1)
    1
    &gt; (&amp; 3 4)
    0
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>|</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Perform the bitwise or of two integers. </p><pre class="fragment">    # (| INT INT)
    &gt; (| 0 1)
    1
    &gt; (| 1 1)
    1
    &gt; (| 2 1)
    3
    &gt; (| 4 3)
    7
    &gt; (| 2 1.0) # Does not work with floats.
    (error 'subr_bor "expected (int int)" '(2 1.000000) "liblisp.c" 1332)
    error
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>^</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Perform the bitwise exclusive of two integers. </p><pre class="fragment">    # (^ INT INT)
    &gt; (^ 1 1)
    0
    &gt; (^ 3 1)
    2
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>~</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Perform the bitwise inversion of an integer. </p><pre class="fragment">    # (~ INT)
    &gt; (~ 0)
    -1
    &gt; (~ -1)
    0
    &gt; (~ 4)
    -5
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>+</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Add two numbers together. </p><pre class="fragment">    # (+ ARITH ARITH)
    &gt; (+ 2 2)
    4
    &gt; (+ 3.2 2)
    5.2          # Converted to float
    &gt; (+ 2 3.2)
    5            # Converted to integer
    &gt; (+ -2 -1)
    -3
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>-</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Subtract the second argument from the first. </p><pre class="fragment">    # (- ARITH ARITH)
    &gt; (- 2 3)
    -1
    &gt; (- 2 -3.0)
    5
    &gt; (- 1.0 9)
    -10.0
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Multiply two numbers together. </p><pre class="fragment">    (* ARITH ARITH)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>%</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the remainder of the first number divided by the second. </p><pre class="fragment">    (% INT INT)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>/</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the first number divided by the second. </p><pre class="fragment">    (/ ARITH ARITH)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>=</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Test for equality between two expressions. This is an alias for "eq". </p><pre class="fragment">    (= EXPR EXPR)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>eq</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Test for equality between two expressions. This is the same function as "=". </p><pre class="fragment">    (eq EXPR EXPR)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>&gt;</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Test whether the first argument given is greater than the second argument. This function works for floats, integers and strings. </p><pre class="fragment">    (&gt; ARITH ARITH)
    (&gt; STRING STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>&lt;</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Test whether the first argument given is less than the second argument. This function works for floats, integers and strings. </p><pre class="fragment">    (&lt; ARITH ARITH)
    (&lt; STRING STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>cons</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Create a new cons cell from two expressions. </p><pre class="fragment">    (cons EXPR EXPR)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>car</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Get the first value from a CONS cell. </p><pre class="fragment">    (car CONS)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>cdr</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Get the second value from a CONS cell. </p><pre class="fragment">    (cdr CONS)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>list</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Create a list from a series of expressions. </p><pre class="fragment">    (list)
    (list EXPR ...)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>match</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">A very simple string matching routine. This routine takes a pattern as its first argument and a string to match the pattern against as its second argument. </p><pre class="fragment">    # (match STRING STRING)
    &gt; (match "hell?" "hello")
    t
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>scons</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Concatenate two strings together. </p><pre class="fragment">    (scons STRING STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>scar</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Make a string from the first character of a string. </p><pre class="fragment">    (scar STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>scdr</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Make a string from a string excluding the first character. </p><pre class="fragment">    (scdr STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>eval</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Evaluate an expression in either the top level environment or with a specially craft association list. </p><pre class="fragment">    (eval EXPR)
    (eval EXPR A-LIST)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>trace!</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Turn tracing on ('t) or off (nil), with tracing on all expressions will be printed as they are evaluated. </p><pre class="fragment">    # (trace! T-OR-NIL)
    &gt; (trace! t)
    &gt; (trace! nil)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>gc</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Force garbage collection. This should have no visible side effects. </p><pre class="fragment">    &gt; (gc)
    t
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>length</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns the length of a list or a string. </p><pre class="fragment">    (length LIST)
    (length STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>input?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns 't' if the expression passed to it is an IO port set up for input, 'nil' otherwise. </p><pre class="fragment">    (input? EXPR)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>output?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns 't' if the expression passed to it is an IO port set up for output, 'nil' otherwise. </p><pre class="fragment">    (output? EXPR)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>eof?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Test whether an IO port has its End-Of-File marker set. </p><pre class="fragment">    (eof? IO)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>flush</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Given no IO port it will flush all FILEs in the <em>program</em>, given an IO port it will attempt to flush that specifically. </p><pre class="fragment">    (flush)
    (flush IO)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>tell</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Return the current IO port position indicator. </p><pre class="fragment">    (tell IO)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>seek</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Perform a file seek on an IO port. This can be relative to the beginning of the file, from the current offset or from the end. </p><pre class="fragment">    (seek IO INT ENUM)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>open</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Open up an IO port for reading or writing. The string can either be the name of a file to be read in, or a string that can be opened as an IO port for reading. </p><pre class="fragment">    (open ENUM STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>get-char</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Read in a character from an input port. It returns a integer representing that character. </p><pre class="fragment">    (get-char IN)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>get-delim</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Read in a record delimited by a character. A string can be provided, but only the first character of the string is used at the moment as a delimiter. An integer can be provided representing that character instead, this can included the End-Of-File marker, which allows you to slurp an entire file into one string. If the record is not delimited by that character it will read the entire contents until the end of the file is encountered. </p><pre class="fragment">    # (get-delim IN STRING)
    # (get-delim IN INTEGER)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Given a file containing the following text: </p><pre class="fragment">    'My name is Ozymandias, king of kings:
    Look on my works, ye Mighty, and despair!'
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Called "ozy.txt": </p><pre class="fragment">    &gt; (define ozy (open *file-in* "ozy.txt"))
    &lt;IO:IN:8258784&gt;
    &gt; (get-delim *eof*)
    "'My name is Ozymandias, king of kings:\nLook on my works, ye Mighty, and despair!'\n"
    &gt; (seek ozy *seek-set* 0)
    0
    &gt; (get-delim "\n")
    "'My name is Ozymandias, king of kings:"
    &gt; (get-delim "\n")
    "Look on my works, ye Mighty, and despair!'"
    &gt; (get-delim "\n")
    ()
    &gt; (seek ozy *seek-set* 0)
    0
    &gt; (get-delim ",")
    "'My name is Ozymandias"
    ...
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>read</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Read in an S-Expression. This returns an S-Expression, not a string. A string can be read from as well, this will still return a parsed S-Expression. </p><pre class="fragment">    # (read IN)
    # (read STRING)
    &gt; (read "(+ 2 2)")
    (+ 2 2)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>put</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Write a string to an IO output port. </p><pre class="fragment">    # (put OUT STRING)
    &gt; (define a-file (open *file-out* "a.txt"))
    &lt;IO:OUT:33884688&gt;
    &gt; (put "Hello\tWorld\n")
    "Hello\tWorld\n"         # String written is returned in escaped form
    # The file "a.txt" should now contain the string Hello   World in it.
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>put-char</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Write a character to an IO output port. </p><pre class="fragment">    (put-char OUT INT)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>print</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Print out an S-Expressions to an output port. </p><pre class="fragment">    (print OUT EXPR)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>ferror</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Tests whether an IO port has its error flag set. </p><pre class="fragment">    (ferror IO)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>system</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Given no arguments it will test whether the systems command processor is available. Given a string it will attempt to execute a command with the systems command processor, returning an integer for the return status of the command. </p><pre class="fragment">    # (system)
    # (system STRING)
    &gt; (system)
    1               # indicates a command processor is avaiable
    &gt; (system "ls") # Whether this works is implementation defined
    doxygen       exp       libline    liblisp.c    liblisp.md  lisp.1  make.bat  readme.md
    doxygen.conf  hist.lsp  liblisp.3  liblisp.h    liblisp.o   main.c  makefile  test.lsp
    doxygen.log   init.lsp  liblisp.a  liblisp.htm  lisp        main.o  meta.lsp
    0
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>remove</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Remove a file specified by a string or symbol passed to it. </p><pre class="fragment">    # (remove STRING)
    &gt; (remove "file-that-does-not-exist.txt")
    nil
    &gt; (remove "file-that-exists.txt")
    t
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>rename</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Rename a file, the first argument is the source, the second the destination. </p><pre class="fragment">    # (rename STRING STRING)
    &gt; (rename "a.txt" "b.txt")
    t # given "a.txt" exists and no permission problems happen.
    &gt; (rename "a.txt" "b.txt") # "a.txt" no longer exists, it cannot be
                               # renamed
    nil
    &gt; (rename "b.txt" "a.txt")
    t
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>hash-create</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Create a new list from a series of key-value pairs. The number of arguments to the function must be even (which includes zero). </p><pre class="fragment">    # (hash-create)
    # (hash-create {STRING EXPR}... )
    &gt; (hash-create)
    (hash-create)
    &gt; (hash-create 'key1 'val1)
    (hash-create "key1" 'val1)  # Not that this is not a list altough it
                                # looks like one
    &gt; (hash-create 'key1 'val1 "key2" '(arbitrary list))
    (hash-create "key1" 'val1 "key2" '(arbitrary list))
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>hash-lookup</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Lookup a string in a hash. </p><pre class="fragment">    # (hash-lookup HASH STRING)
    &gt; (define foo (hash-create 'key1 'val1 "key2" '(arbitrary list)))
    (hash-create "key1" 'val1 "key2" '(arbitrary list))
    &gt; (hash-lookup foo 'key1)
    (key1 . val1)
    &gt; (hash-lookup foo 'key2)
    (key2 . (arbitrary list))
    &gt; (hash-lookup foo 'key3)
    ()
    &gt; (hash-lookup foo "key1")
    (key1 . val1)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>hash-insert</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Insert a key-value pair into a hash table. </p><pre class="fragment">    # (hash-insert HASH SYMBOL EXPR)
    &gt; (define foo (hash-create 'key1 'val1 "key2" '(arbitrary list)))
    (hash-create "key1" 'val1 "key2" '(arbitrary list))
    &gt; (hash-insert foo 'hello "world")
    (hash-create "key1" 'val1 "key2" '(arbitrary list) "hello" '"world")
    &gt; (hash-lookup foo "hello")
    (hello . "world")
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>coerce</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Coerce one type into another, if the coercion is possible, if not it throws an error. All objects can be coerced into the same type as the object, for example hashes can be coerced into hashes, integers into integers, etc.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Some of the mappings have additional restrictions on them, such as when mapping an Integer from a String, the string must represent a valid number such as; "-1", "0", "99" and not "99a", "not-a-number" or even "1.0".</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The mappings are:</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>Integer from String, Float</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">All floats can be converted to integers.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">All strings must represent a valid integer, containing only characters and forms that would be valid integer sequences if feed into the interpreter raw.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This means all strings of the form: </p><pre class="fragment">    (+|-)?(0[xX][0-9a-fA-F]+|0[0-7]*|[1-9][0-9]+)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Can be coerced into integers.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>List from String, Hash</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">All strings and hashes can be coerced into lists.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>String from Integer, Symbol, Float</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">All integers, symbols and floats can be coerced into strings.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>Symbol from String</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Most strings can be coerced into symbols, baring those strings with white spaces, single or double quotes, parentheses or the black slash characters.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>Hash from List</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The list being coerced into a hash needs to have an even number of elements in it, the even elements need to be either symbols or strings.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>Float from Integer, String</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">All integers can be converted to floats, the strings however need to represent a valid floating pointing number. </p><pre class="fragment">    # (coerce ENUM EXPR)
    &gt; (coerce *integer* 5.3)
    5
    &gt; (coerce *hash* '(a 3 "b" (+ 2 2) c val))
    (hash-create "a" '3 "b" '(+ 2 2) "c" 'val)
    &gt; (coerce *float* "-3.2e+4")
    -32000.000000
    &gt; (coerce *symbol* "hello")
    hello
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>time</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Return a number representing the time defined by the implementation of the C library that this program was linked against. </p><pre class="fragment">    # (time)
    &gt; (time)
    1438547211
    &gt; (time)
    1438547212
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>getenv</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Get an environment variable from the system based on a string. </p><pre class="fragment">    # (getenv STRING)
    &gt; (getenv "SHELL")
    "/bin/bash"        # returned value is implementation defined
    &gt; (getenv "TERM")
    "screen-256color"  # returned value is implementation defined
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>random</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Return a number from the Pseudo Random Number Generator. </p><pre class="fragment">    # (random)
    &gt; (random)
    4451522206897829187
    &gt; (random)
    3015435609869357244
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>seed</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Seed the random number generator. </p><pre class="fragment">    # (seed INT INT)
    &gt; (seed 1 1)
    t
    &gt; (seed 1 1.0)
    (error 'subr_seed "expected (integer integer)" (1 1.000000) "liblisp.c" 1965)
    error
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>date</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Return a list representing the date. </p><pre class="fragment">    # (date)
    &gt; (date)
    (2015 8 4 17 20 50 52)
    # (year month week-day month-day hours minutes seconds)
    # month (since January)    : 0-11
    # week-day (since Sunday)  : 0-6
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>assoc</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Find an atom within an association list, an association list is a list containing a series of dotted pairs, so: </p><pre class="fragment">    ((a . 1) (b . 2) (c . 3))
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Is a valid association list. Association lists are used for to store and lookup small numbers of key-value pairs. <em>assoc</em> returns the dotted pair in which the <em>car</em> of it is equal to the <em>ATOM</em> supplied, it returns <em>nil</em> if cannot find one. </p><pre class="fragment">    &gt; (assoc ATOM A-LIST)
    &gt; (define a-list '((a . 1) (b . 2) (c . 3)))
    ((a . 1) (b . 2) (c . 3))
    &gt; (assoc 'a a-list)
    (a . 1)
    &gt; (assoc 'c a-list)
    (c . 3)
    &gt; (assoc 'd a-list)
    ()
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>locale!</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Set the locale string. </p><pre class="fragment">    (locale! ENUM STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>ipow</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate an integer exponentiation. </p><pre class="fragment">    # (ipow INT INT)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>ilog2</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the binary logarithm of an integer. </p><pre class="fragment">    # (ilog2 INT)
    &gt; (ilog2 4)
    2
    &gt; (ilog2 99)
    6
    &gt; (ilog2 127)
    127
    &gt; (ilog2 128)
    7
    &gt; (ilog2 -1)
    63 # implementation defined
    &gt; (ilog2 1.0)
    (error 'subr_binlog "expected (int)" '(1.000000) "liblisp.c" 1374)
    error
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>close</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Close an IO port. </p><pre class="fragment">    (close IO)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>type-of</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Return an integer representing the type of an object. </p><pre class="fragment">    # (type-of EXPR)
    &gt; (eq *integer* (type-of 1))
    t
    &gt; (eq *integer* (type-of 1.0))
    ()
    &gt; (type-of "Hello, World")
    6 # implementation defined
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>timed-eval</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Evaluate an expression in an environment, as with <em>eval</em>, but <em>cons</em> the time taken to execute (in seconds) with the returned value from <em>eval</em>. </p><pre class="fragment">    # (timed-eval EXPR)
    # (timed-eval EXPR A-LIST)
    # In this example "monte-carlo-pi" is a function which attempts to
    # approximate the value of pi with the Monte Carlo Method, the value
    # passed to "monte-carlo-pi" is the number of iterations to perform,
    # the more performed the closer it should get to the value of pi.
    &gt; (monte-carlo-pi 400)
    3.150000
    &gt; (timed-eval '(monte-carlo-pi 400))
    (0.040000 . 3.280000)
    &gt; (timed-eval '(monte-carlo-pi 4000))
    (0.430000 . 3.127000)
       ^           ^
       |           |
    Exec time    Approximation of "pi"
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>reverse</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Reverse a string, a list, or a hash (exchanging keys for values). </p><pre class="fragment">    # (reverse STRING)
    # (reverse LIST)
    # (reverse HASH)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>split</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Split a string based on a regular expression. </p><pre class="fragment">    # (split STRING)
    # (split STRING STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>substring</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Create a substring from a string. There are two forms of this function, the first can accept any integer, positive or negative (including zero), the second form can accept two positive integers (including zero). </p><pre class="fragment">    # (substring STRING INTEGER)
    # (substring STRING INTEGER INTEGER)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>format</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Print out a list of expressions based on a format string. The format string is the first argument, it is quite simple (for now). </p><pre class="fragment">    %%      print out a percent character '%'
    %s      print out a string, expects a string argument
    %c      print out a character, argument can either be an integer
            or string of length one
    %S      print out an expression
    %*x     print out character 'x' multiple times, expects integer
    %f      print out a float or integer as a float
    %d      print out a integer or float as a integer
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Any other character is printed out. If an argument is mismatched, there are too few arguments, or there are too many, an error is thrown. </p><pre class="fragment">    # (format IO STRING EXPRS)
    &gt; (format *output* "examples: %S %s\n" '(a b (c d)) "a string!")
    examples: (a b (c d)) a string!
    "examples: (a b (c d)) a string!\n"
    &gt; (format *output* "%c %c\n" 104 "h")
    h h
    "h h\n"
    &gt; (format *output* "percent %%\n")
    percent %
    "percent %\n"
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>regex-span <pre class="fragment">  # (regex-span STRING STRING)
</pre></li>
<li>raise-signal</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Raise a signal, this function affects the entire program and can cause it to halt. </p><pre class="fragment">    # (raise-signal INTEGER)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>isalnum?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns 't if argument is alphanumeric, nil otherwise. This function can be used on integers or strings. </p><pre class="fragment">    # (isalnum? INTEGER)
    # (isalnum? STRING)
    &gt; (isalnum? "")
    ()
    &gt; (isalnum? "abcABC123")
    t
    &gt; (isalnum? 97) # True if using ASCII, 97 == ASCII 'a'
    t
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>isalpha?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns 't if argument consists of alphabetic characters, nil otherwise. This function can be used on integers or strings. </p><pre class="fragment">    # (isalpha? INTEGER)
    # (isalpha? STRING)
    &gt; (isalpha? "abcABC")
    t
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>iscntrl?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns 't if argument consists of control characters, nil otherwise. This function can be used on integers or strings. </p><pre class="fragment">    # (iscntrl? INTEGER)
    # (iscntrl? STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>isdigit?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns 't if argument consists of digits, nil otherwise. This function can be used on integers or strings. </p><pre class="fragment">    # (isdigit? INTEGER)
    # (isdigit? STRING)
    &gt; (isdigit? "0123")
    t
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>isgraph?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns 't if argument consists of printable characters (excluding space), nil otherwise. This function can be used on integers or strings. </p><pre class="fragment">    # (isgraph? INTEGER)
    # (isgraph? STRING)
    &gt; (isgraph? "1aAB2.#")
    t
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>islower?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns 't if argument consists of lower case characters, nil otherwise. This function can be used on integers or strings. </p><pre class="fragment">    # (islower? INTEGER)
    # (islower? STRING)
    &gt; (islower? "abc")
    t
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>isprint?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns 't if argument consists of printable characters, nil otherwise. This function can be used on integers or strings. </p><pre class="fragment">    # (isprint? INTEGER)
    # (isprint? STRING)
    &gt; (isgraph? "1a AB2.#")
    t
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>ispunct?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns 't if argument consists of punctuation characters, nil otherwise. This function can be used on integers or strings. </p><pre class="fragment">    # (ispunct? INTEGER)
    # (ispunct? STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>isspace?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns 't if argument consists of whitespace, nil otherwise. This function can be used on integers or strings. </p><pre class="fragment">    # (isspace? INTEGER)
    # (isspace? STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>isupper?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns 't if argument consists of upper case characters, nil otherwise. This function can be used on integers or strings. </p><pre class="fragment">    # (isupper? INTEGER)
    # (isupper? STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>isxdigit?</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Returns 't if argument consists of hexadecimal digits, nil otherwise. This function can be used on integers or strings. </p><pre class="fragment">    # (isxdigit? INTEGER)
    # (isxdigit? STRING)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>tr</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Translate a string given a mode and two sets. This function is similar to the "tr" program available in Unix environments and the C functions that back this subroutine can be used to implement that program. The lisp interface is a bit clunky, but it is a useful subroutine.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The mode string, the first argument, determines how the conversion should proceed. Some of the arguments are mutually exclusive. </p><pre class="fragment">   ''  (empty string) normal translation
   'x' normal translation
   'c' compliment set 1
   's' squeeze repeated character run
   'd' delete characters (s2 should be NULL)
   't' truncate set 1 to the size of set 2

    # (tr STRING STRING STRING STRING)
    #       ^      ^      ^      ^
    #      mode  set-1  set-2  string
    &gt; (tr "x" "abc" "def" "aaaabbaaaccc") 
    "ddddeedddfff"
    &gt; (tr "t" "abc" "def" "aaaabbaaaccc") 
    "ddddeedddfff"
    &gt; (tr "s" "abc" "def" "aaaabbaaaccc") 
    "dedf"
    &gt; (tr "ts" "abc" "de" "aaaabbaaaccc") 
    "dedccc"
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>procedure-code</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Return the code from a user defined procedure. Or <em>nil</em> if there is not one. </p><pre class="fragment">    # (procedure-code DEFINED-PROCEDURE)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>procedure-args</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Return the arguments from a user defined procedure. Or <em>nil</em> if there is not one. </p><pre class="fragment">    # (procedure-args DEFINED-PROCEDURE)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>validation-string</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Return the format string from a procedure. Or <em>nil</em> if there is not one. </p><pre class="fragment">    # (validation-string FUNCTION)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>documentation-string</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Return the documentation string from a procedure. Or <em>nil</em> if there is not one. </p><pre class="fragment">    # (documentation-string FUNCTION)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>top-environment</li>
<li>closed?</li>
<li>mapcar</li>
<li>environment</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Predefined variables</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">These are predefined variables used throughout the system, they often directly relate to the internal C enumerations that are used, when this is the case they are not guaranteed to be constant between different implementations or versions, only self consistent with a single specific implementation.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*seek-cur*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Option for <em>seek</em>. File seeks are performed from the current file position.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*seek-set*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Option for <em>seek</em>. File seeks are performed relative to the beginning of the file.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*seek-end*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Option for <em>seek</em>. File seeks are performed relative to the end of the file.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*random-max*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Maximum number a random number generated by "(random)" can take.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*integer-max*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Maximum number an integer can hold.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*integer-min*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Minimum number an integer can hold.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The following 11 system variable represent the internal type that an object can take. They are returned by functions like <em>type-of</em>;</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">For example: </p><pre class="fragment">    &gt; (eq *integer* (type-of 1))
    t
    &gt; (eq *integer* (type-of 1.0))
    nil
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ol type="1">
<li>*integer*, an integer, such as '1'</li>
<li>*symbol*, a symbol such as '+'</li>
<li>*cons*, a list such as '(1 2 3)'</li>
<li>*string*, a string such as '"hello"'</li>
<li>*hash*, a hash, made by <em>hash-create</em></li>
<li>*io*, an IO port, made by <em>open</em></li>
<li>*float*, a floating point number such as '2.0'.</li>
<li>*procedure*, a procedure, such as "(lambda (x) (\* x x))"</li>
<li>*primitive*, a built in subroutine written in C</li>
<li>*f-procedure*, a F-Expression, such as "(flambda (x) x)"</li>
<li>*user-defined*, an arbitrary user defined type</li>
</ol>
<ul>
<li>*file-in*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">An option for <em>open</em>. The string passed to open will be treated as a file name to open up for reading. </p><pre class="fragment">    &gt; (open *file-in* "file.txt")
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*file-out*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">An option for <em>open</em>. The string passed to open will be treated as a file name to open up for writing. </p><pre class="fragment">    &gt; (open *file-out* "file.txt")
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*string-in*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">An option for <em>open</em>. The string passed ot open will be treated as a string to read from. </p><pre class="fragment">    &gt; (define in (open *string-in* "(+ 2 2) \"Hello, World\""))
    &lt;IO:IN:32145072&gt;
    &gt; (read in)
    (+ 2 2)
    &gt; (read in)
    "Hello, World"
    &gt; (read in)
    error
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*string-out*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">An option for <em>open</em>. Not used for the moment.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*lc-all*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">An option for <em>locale</em>. It is used to set the entire locale.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*lc-collate*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">An option for <em>locale</em>. This is used to set the LC_COLLATE option, which affects <em>strcoll</em> and <em>strxfrm</em>, although they are not used within the interpreter.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*lc-ctype*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">An option for <em>locale</em>. Affects character functions in "ctype.h", allowing the locale to be changed for them.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*lc-monetary*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">An option for <em>locale</em>. Affects the money format.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*lc-numeric*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">An option for <em>locale</em>. Affects non monetary numbers in I/O functions like scanf and printf, although this should not affect the interpreter.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*lc-time*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">An option for <em>locale</em>. Affects strftime, which is not used in the interpreter.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*eof*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Represents the End-Of-File marker, can be passed into "get-delim" as a delimiter.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*args*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This is a list containing all of the arguments passed into the interpreter, it is a list of strings, each string being a single argument.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">If the interpreter was invoked like this </p><pre class="fragment">    ./lisp -Epc init.lsp
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Then *args* will be: </p><pre class="fragment">    ("./lisp" "-Epc" "init.lsp")
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">*args* is only set at startup.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*history-file*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The name of the history file in use by "libline", which is the line editor, if that functionality has been added to the interpreter.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*version*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This contains the version, as determined by the <a href="https://en.wikipedia.org/wiki/Revision_control">VCS</a>, if the <a href="https://en.wikipedia.org/wiki/Revision_control">VCS</a> is not available it will be set to "unknown".</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*commit*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This contains the commit, as determined by the <a href="https://en.wikipedia.org/wiki/Revision_control">VCS</a>, if the <a href="https://en.wikipedia.org/wiki/Revision_control">VCS</a> is not available it will be set to "unknown".</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*repository-origin*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This contains a string describing the origin of the lisp interpreters repository, if this is not available it will be set to "unknown". </p><pre class="fragment">    # floats
    pi                 The mathematical constant pi
    e                  Euler's number
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*os*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This is a string which describes what operating system is in use, such as "unix", "windows" or "unknown" (the latter if the which operating system is in use cannot be determined).</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>*have-dynamic-loader*</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This is 't if the dynamic loader is available, it is '() otherwise.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>pi</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Roughly "3.14159...".</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The numerical constant <a href="https://en.wikipedia.org/wiki/Pi">"pi"</a>, this is a floating point value that does not follow the normal naming convention for the predefined variables of enclosing the name within asterisks.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>e</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Roughly "2.71828...".</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The numerical constant <a href="https://en.wikipedia.org/wiki/E_%28mathematical_constant%29">"e"</a>. It also breaks with the usual variable naming convention like <a href="https://en.wikipedia.org/wiki/Pi">"pi"</a> does.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Glossary</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Glossary of all of defined subroutine primitives and variables.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h4>Built in subroutines</h4>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"> <pre class="fragment">    &amp;                  Perform a bitwise AND on two integers
    |                  Perform a bitwise OR on two integers
    ^                  Perform a bitwise XOR on two integers
    ~                  Perform a bitwise inversion on an integer
    +                  Add two numbers
    -                  Subtract a number from another number
    *                  Multiply two numbers together
    %                  Calculate the remainder of a division
    /                  Divide two numbers
    =                  Test for equality
    eq                 Test for equality
    &gt;                  Greater than test
    &lt;                  Less than test
    cons               Create a new cons cell
    car                Get the first value of a cons cell
    cdr                Get the second value of a cons cell
    list               Create a list from multiple expressions
    match              Match a string based on a patten
    scons              Concatenate two strings
    scar               Get the first character in a string
    scdr               Get a string excluding the first character
    eval               Evaluate an expression
    trace!             Turn tracing on or off 
    gc                 Control the garbage collector
    length             Get the length of an expression or string
    input?             Check if an IO object is set up for reading
    output?            Check if an IO object is set up for writing
    eof?               Check if an IO object has its End Of File marker set
    flush              Flush an output stream
    tell               Get the current file position indicator
    seek               Perform a seek in a file
    open               Open an IO object for reading or writing (not both)
    get-char           Get a character
    get-delim          Read in a line delimited by a character
    read               Read in a S-Expression
    put                Print a string, unescaping it
    put-char           Print a character
    print              Print out an S-Expression
    ferror             Check if an IO object has encountered an error
    system             Run a command in the systems command processor
    remove             Remove files
    rename             Rename files
    hash-create        Create a hash table
    hash-lookup        Lookup a value in a hash by string
    hash-insert        Insert a value into a hash
    coerce             Convert types
    time               Return the time
    getenv             Get an environment variable
    random             The Pseudo Random Number Generator
    seed               Seed the Pseudo Random Number Generator
    date               Return a list of integers representing the date
    assoc              Find a value in an association list
    locale!            Set the locale
    ilog2              Calculate the binary logarithm of an integer
    ipow               Calculate exponentiation on integers
    close              Close an IO object
    type-of            Return an integer-enum for the type of an object
    timed-eval         Eval with execution time
    reverse            Reverse a string, a list or a hash
    split              Split a string based
    substring          Make a substring from a string
    format             Print out a list of objects based on a format string
    regex              Match a regular expression on a string
    raise-signal       Raise a signal
    isalnum?           Is string or integer alphanumeric only?
    isalpha?           Is string or integer alphabetic only?
    iscntrl?           Is string or integer control character?
    isdigit?           Is string or integer digits?
    isgraph?           Is string or integer printable (except space)?
    islower?           Is string or integer is lower case?
    isprint?           Is string or integer is printable?
    ispunct?           Is string or integer is punctuation?
    isspace?           Is string or integer is white space?
    isupper?           Is string or integer is upper case?
    isxdigit?          Is string or integer is a hex digit?
    tr                 Translate a string
    procedure-code     Return the code from a user defined procedure
    procedure-args     Return the arguments from a user defined procedure"
    validation-string  Return the format string from a procedure
    documentation-string Return the documentation string from a procedure
    top-environment    Get the top level environment
    closed?            Is a cell closed
    mapcar             map a function onto a series of lists
    environment        Get the current enviroment
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h4>integers</h4>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"> <pre class="fragment">    *seek-cur*         Seek from current file marker with seek
    *seek-set*         Seek from the beginning of a file with seek
    *seek-end*         Seek from the end of a file with seek
    *random-max*       Maximum number a random number can be
    *integer-max*      Maximum number an integer can be
    *integer-min*      Minimum number an integer can be
    *integer*          Integer   type option for coerce or type-of
    *symbol*           Symbol    type option for coerce or type-of
    *cons*             Cons      type option for coerce or type-of
    *string*           String    type option for coerce or type-of
    *hash*             Hash      type option for coerce or type-of
    *io*               IO        type option for type-of
    *float*            Float     type option for coerce or type-of
    *procedure*        Procedure type option type-of
    *primitive*        Primitive type option for type-of
    *f-procedure*      Fexpr     type option for type-of
    *user-defined*     User-define type option for type-of
    *file-in*          File   input  option for open
    *file-out*         File   output option for open
    *string-in*        String input  option for open
    *string-out*       String output option for open
    *lc-all*           Locale all option for locale!
    *lc-collate*       Locale collate option for locale!
    *lc-ctype*         Locale C-type option for locale!
    *lc-monetary*      Locale money formatting option for locale!
    *lc-numeric*       Locale numeric option for locale!
    *lc-time*          Locale time option for locale!
    *eof*              End-Of-File marker
    *args*             Command line options passed into the interpreter
    *history-file*     If using libline, it contains the history file name
    *have-compile*     't if the C compiler is available, '() otherwise
    *have-line*        't if the line editor is available, '() otherwise
    *have-dynamic-loader* 't if the dynamic loader is available, '() otherwise
    *version*          The version of this interpreter if known
    *commit*           Commit version
    *repository-origin* Origin of the lisp interpreters repository
    *os*               Which operating system is in use
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h4>floats</h4>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"> pi The mathematical constant pi e Euler's number</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h2>Modules</h2>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This directory <a href="mod/">mod/</a> contains modules that can be loaded at run time, mostly containing non portable or extraneous code that does not belong in the core language.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The module system is dependent on the <a href="main.c">main.c</a> example interpreter and the associate functions and <em>global state</em>.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">All of the libraries installed and linked against with these modules must be compiled as shared libraries. This might have to be arranged by the package maintainer, for example the TCC development package on Debian 7 only contains the static version of the library but the makefile contains options for compiling and installing a shared version of the library. The build system will attempt</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Currently the following modules are support: </p><pre class="fragment">    liblisp_bignum.so : An arbitrary precious arithmetic library
    liblisp_sql.so    : An SQL interface using sqlite3
    liblisp_tcc.so    : Tiny C Compiler module
    liblisp_unix.so   : Interfacing with Unixen
    liblisp_crc.so    : CRC module
    liblisp_diff.so   : Print the "diff"
    liblisp_tsort.so  : Topological sorting
    liblisp_x11.so    : X11 interface
    liblisp_line.so   : The line editor
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The following modules are planned: </p><pre class="fragment">    openGL or SDL module
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>dynamic loader</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This is the interface to the dynamic module loader. This can be used to load compiled modules at run time so the interpreter can access compiled subroutines after the interpreter itself has been compiled. This interface does not implement a way to close loaded modules as there is no way to invalidate previously acquired subroutines.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>dynamic-open</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Open up a module for use, it returns a user defined type representing the shared library handle that can be used with <em>dynamic-symbol</em>.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>dynamic-symbol</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Get a symbol from a compiled module, the symbol should be a function abiding by the function type of all the built in subroutines. The following C typedef is how the returned subroutine should look like: </p><pre class="fragment">    typedef cell *(*subr)(lisp *, cell*);
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This function will return 'error if the subroutine could not be found (or there was another error, which one can be found with dynamic-error).</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Below is an example, given a shared module "libexample.so", with the example code: </p><pre class="fragment">    #include &lt;liblisp.h&gt;
    cell* subr_example(lisp *l, cell *args) {
            if(!cklen(args, 1))
                    RECOVER(l, "\"expected (int)\" '%S", args);
            return mkint(l, intval(car(args)) * 2);
    }
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Make sure ldconfig has been run after installing libexample.so into a directory that the loader can find it, the following code in the interpreter will load that shared library and allow the function to be run. </p><pre class="fragment">    # (dynamic-symbol DYNAMIC-MODULE STRING)
    &gt; (define a-module (dynamic-open "libexample.so"))
    &lt;DYNAMIC-MODULE:34437120&gt;
    &gt; (define example-subr (dynamic-symbol a-module "subr_example"))
    &lt;SUBR:47982636828560&gt;
    &gt; (example-subr 4)
    8
    &gt; (example-subr -4)
    -8
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>dynamic-error</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This function returns an error string representing the latest error to occur (if any) resulting from an error with the dynamic loader. </p><pre class="fragment">    &gt; (define a-module (dynamic-open "libexample.so"))
    &lt;DYNAMIC-MODULE:34437120&gt;
    &gt; (dynamic-symbol a-module "subr_does_not_exist")
    error
    &gt; (dynamic-error)
    "libdoesnotexist.so: cannot open shared object file: No such file or directory"
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h3>Documented modules</h3>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">The following are the modules are not part of the core language, but they are documented here (for now).</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h5>compiler</h5>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>cc</li>
<li>cc-link</li>
<li>cc-file</li>
<li>cc-get-subroutine</li>
<li>cc-add-include-path</li>
<li>cc-add-system-include-path</li>
<li>cc-set-library-path</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h5>math.h</h5>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"> <pre class="fragment">    log                Compute the natural logarithm of a float
    log10              Compute the logarith of a float in base 10
    fabs               Return the absolute
    sin                Sine of an angle (in radians)
    cos                Cosine of an angle (in radians)
    tan                Tangent of an angle (in radians)
    asin               Arc Sine
    acos               Arc Cosine
    atan               Arc Tangent
    sinh               Hyperbolic Sine
    cosh               Hyperbolic Cosine
    tanh               Hyperbolic Tangent
    exp                Eulers constant raised to the power of X
    sqrt               Squareroot of a float
    ceil               Round upwards
    floor              Round downwards
    pow                Computer X raised to the Y
    modf               Split a value into integer and fractional parts
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><h5>Additional functions</h5>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Functions added optionally in modules.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">For all the mathematical functions imported from the C math library the arguments are converted to floating point numbers before, the functions also all return floating point values, apart from <a href="http://www.cplusplus.com/reference/cmath/modf/">modf</a> which returns a cons of two floating point values as a dotted pair.</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>log</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the <a href="https://en.wikipedia.org/wiki/Natural_logarithm">natural logarithm</a> of a floating point value. Integers are converted to floating point values before hand. </p><pre class="fragment">    # (log ARITH)
    &gt; (log e)
    1.0
    &gt; (log 1)
    0.0
    &gt; (log -1)
    nan
    &gt; (log 10)
    2.302585
    &gt; (log 3.3)
    1.193922
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>log10</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate a <a href="https://en.wikipedia.org/wiki/Logarithm">logarithm</a> with base 10. If you need a logarithm of a value 'x' to any other base, base 'b', you can use: </p><pre class="fragment">    logb(x) = log10(x) / log10(b)
    or
    logb(x) = log(x) / log(b)

    # (log10 ARITH)
    &gt; (log10 e)
    0.434294
    &gt; (log10 1)
    0.0
    &gt; (log10 -1)
    nan
    &gt; (log10 10)
    1.0
    &gt; (log10 3.3)
    0.518514
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>fabs</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Return the <a href="https://en.wikipedia.org/wiki/Absolute_value">absolute value</a> of a floating point number. </p><pre class="fragment">    # (fabs ARITH)
    &gt; (fabs 1)
    1
    &gt; (fabs -2)
    2
    &gt; (fabs 5.2)
    5.2
    &gt; (fabs -4.0)
    4.0
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>sin</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the <a href="https://en.wikipedia.org/wiki/Sine">sine</a> of an angle, in radians. </p><pre class="fragment">    # (sin ARITH)
    &gt; (sin pi)
    0.0
    &gt; (sin (/ pi 2))
    1.0
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>cos</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the <a href="https://en.wikipedia.org/wiki/Trigonometric_functions#Sine.2C_cosine_and_tangent">cosine</a> of an angle, in radians. </p><pre class="fragment">    # (cos ARITH)
    &gt; (cos pi)
    -1.0
    &gt; (cos (/ pi 2))
    0.0
    &gt; (cos (/ pi 3))
    0.5
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>tan</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the <a href="https://en.wikipedia.org/wiki/Trigonometric_functions#Sine.2C_cosine_and_tangent">tangent</a> of an angle, in radians. </p><pre class="fragment">    # (tan ARITH)
    &gt; (tan 0)
    0
    &gt; (tan (/ pi 3))
    1.732051
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>asin</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the <a href="https://en.wikipedia.org/wiki/Trigonometric_functions#Reciprocal_functions">reciprocal of sine</a>, or the "cosecant". </p><pre class="fragment">    # (asin ARITH)
    &gt; (asin 0)
    0.0
    &gt; (asin 1.0)
    1.570796
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>acos</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the <a href="https://en.wikipedia.org/wiki/Trigonometric_functions#Reciprocal_functions">reciprocal of cosine</a>, or the "secant". </p><pre class="fragment">    # (acos ARITH)
    &gt; (acos -1)
    3.141593
    &gt; (acos 0.0)
    1.570796
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>atan</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the <a href="https://en.wikipedia.org/wiki/Trigonometric_functions#Reciprocal_functions">reciprocal of tangent</a>, or the "cotangent". </p><pre class="fragment">    (atan ARITH)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>sinh</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the <a href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic sine</a>. </p><pre class="fragment">    (sinh ARITH)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>cosh</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the <a href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic cosine</a>. </p><pre class="fragment">    (cosh ARITH)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>tanh</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the <a href="https://en.wikipedia.org/wiki/Hyperbolic_function">hyperbolic tangent</a>. </p><pre class="fragment">    (tanh ARITH)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>exp</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the <a href="https://en.wikipedia.org/wiki/Exponential_function">exponential function</a>. Or Euler's number raised to the floating point number provided. </p><pre class="fragment">    # (exp ARITH)
    &gt; (exp 0)
    1.0
    &gt; (exp 1)
    2.718282
    &gt; (exp -1)
    0.367879
    &gt; (exp 2)
    7.389056
    &gt; (exp 0.5)
    1.648721
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>sqrt</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the <a href="https://en.wikipedia.org/wiki/Square_root">square root</a> of a number. </p><pre class="fragment">    # (sqrt ARITH)
    &gt; (sqrt 100)
    10.0
    &gt; (sqrt 69.0)
    8.306624
    &gt; (sqrt -4)
    -nan
    &gt; (sqrt 4)
    2.0
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>ceil</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Calculate the <a href="http://www.cplusplus.com/reference/cmath/ceil/">ceil</a> of a float, or round up to the nearest integer, from "ceiling". </p><pre class="fragment">    # (ceil ARITH)
    &gt; (ceil 4)
    4
    &gt; (ceil 4.1)
    5.0
    &gt; (ceil -3)
    -3.0
    &gt; (ceil -3.1)
    -3.0
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>floor</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Round down to the "[floor][]", or down to the nearest integer. </p><pre class="fragment">    # (floor ARITH)
    &gt; (floor 4)
    4.0
    &gt; (floor 4.9)
    4.0
    &gt; (floor -3)
    -3.0
    &gt; (floor -4.9)
    -5.0
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>pow</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Raise the first value to the power of the second value. </p><pre class="fragment">    # (pow ARITH ARITH)
    &gt; (pow 2 4)
    16.0
    &gt; (pow -2  0.5)
    1.414214
    &gt; (pow -2 -0.5)
    0.707107
    &gt; (pow -2 -0.5)
    nan
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li><a href="http://www.cplusplus.com/reference/cmath/modf/">modf</a></li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Split a floating point value (integers are converted to floats first) into integer and fractional parts, returning a cons of the two values. </p><pre class="fragment">    # (modf ARITH)
    &gt; (modf 2)
    (2.000000 . 0.000000)
    &gt; (modf 2.1)
    (2.000000 . 0.100000)
    &gt; (modf -3.5)
    (-3.000000 . -0.500000)
    &gt; (modf -0.4)
    (-0.000000 . -0.400000)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>line-editor-mode</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">If the line editing library is used then this function can be used to query the state of line editor mode, 't' representing <a href="https://en.wikipedia.org/wiki/Vi">"Vi"</a> like editing mode, 'nil' <a href="https://en.wikipedia.org/wiki/Emacs">"Emacs"</a> mode. The mode can be changed by passing in 't' to set it to 'Vi' mode and 'nil' to Emacs mode. </p><pre class="fragment">    (line-editor-mode)
    (line-editor-mode T-or-Nil)
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>history-length</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">This variable controls the length of the history that the line-editing library saves. </p><pre class="fragment">    # (history-length INT)
    &gt; (history-length 1) # disable history
    &gt; (history-length 2) # remember one entry
    &gt; (history-length 200) # remember 199 enteries.
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><ul>
<li>clear-screen</li>
</ul>
</div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual">Clear the terminal screen, in interactive mode the return value (always 't') is printed and then the prompt if that option is set. </p><pre class="fragment">    # (clear-screen)
    &gt; (clear-screen)
    t
</pre></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"> <h1>References</h1>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"></div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References">A list of references used for this lisp interpreter and this documentation.</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><h2>X-Macros</h2>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"></div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References">X-Macros are heavily used within the interpreter for initialization of the data structures relating to built in subroutines, special symbols (such as <em>nil</em>, <em>t</em>, <em>cond</em>, <em>if</em>, and others) and normal symbols (such as <em>pi</em>, <em>e</em> and <em>integer-max</em>) that are useful.</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><ol type="1">
<li><a href="https://en.wikipedia.org/wiki/X_Macro">https://en.wikipedia.org/wiki/X_Macro</a></li>
<li><a href="http://www.drdobbs.com/the-new-c-x-macros/184401387">http://www.drdobbs.com/the-new-c-x-macros/184401387</a></li>
<li><a href="http://www.drdobbs.com/cpp/the-x-macro/228700289">http://www.drdobbs.com/cpp/the-x-macro/228700289</a></li>
</ol>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><h2>"Struct hack" and Flexible Array Members</h2>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"></div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References">The "Struct hack" in C is a common pre C99 technique that has been replaced by Flexible Array Members. It does not quite work in this project however, due to the fact that it needs to initialize static structures as well.</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><ol type="1">
<li><a href="http://c-faq.com/struct/structhack.html">http://c-faq.com/struct/structhack.html</a></li>
<li><a href="https://stackoverflow.com/questions/16553542/c-struct-hack-at-work">https://stackoverflow.com/questions/16553542/c-struct-hack-at-work</a></li>
<li><a href="https://stackoverflow.com/questions/3711233/is-the-struct-hack-technically-undefined-behavior">https://stackoverflow.com/questions/3711233/is-the-struct-hack-technically-undefined-behavior</a></li>
<li><a href="https://en.wikipedia.org/wiki/Flexible_array_member">https://en.wikipedia.org/wiki/Flexible_array_member</a></li>
<li><a href="https://stackoverflow.com/questions/246977/flexible-array-members-in-c-bad">https://stackoverflow.com/questions/246977/flexible-array-members-in-c-bad</a></li>
</ol>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><h2><a href="https://en.wikipedia.org/wiki/Lisp_%28programming_language%29">Lisp</a></h2>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"></div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References">Here are a list of references on how to implement lisp interpreters and to other lisp interpreters people have made.</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><ol type="1">
<li><a href="http://ldc.upenn.edu/myl/llog/jmc.pdf">http://ldc.upenn.edu/myl/llog/jmc.pdf</a></li>
<li><a href="http://c2.com/cgi/wiki?ImplementingLisp">http://c2.com/cgi/wiki?ImplementingLisp</a></li>
<li><a href="http://www.sonoma.edu/users/l/luvisi/sl5.c">http://www.sonoma.edu/users/l/luvisi/sl5.c</a></li>
<li><a href="https://news.ycombinator.com/item?id=8444930">https://news.ycombinator.com/item?id=8444930</a></li>
<li><a href="https://github.com/kimtg/Arcadia">https://github.com/kimtg/Arcadia</a></li>
<li><a href="https://www.gnu.org/software/guile/">https://www.gnu.org/software/guile/</a></li>
<li><a href="https://github.com/kanaka/mal">https://github.com/kanaka/mal</a></li>
<li><a href="https://news.ycombinator.com/item?id=9121448">https://news.ycombinator.com/item?id=9121448</a></li>
<li><a href="http://www.schemers.org/Documents/Standards/R5RS/">http://www.schemers.org/Documents/Standards/R5RS/</a></li>
<li><a href="https://news.ycombinator.com/item?id=869141">https://news.ycombinator.com/item?id=869141</a></li>
<li><a href="http://shrager.org/llisp/">http://shrager.org/llisp/</a></li>
<li><a href="https://github.com/darius/ichbins">https://github.com/darius/ichbins</a></li>
</ol>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><h2>Garbage Collection</h2>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"></div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References">Links on garbage collection in general:</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><ol type="1">
<li><a href="http://www.brpreiss.com/books/opus5/html/page424.html">http://www.brpreiss.com/books/opus5/html/page424.html</a></li>
<li><a href="http://c2.com/cgi/wiki?MarkAndSweep">http://c2.com/cgi/wiki?MarkAndSweep</a></li>
</ol>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><h2>Regex</h2>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"></div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References">The matching function provided by the base library "match" is very simple, but can be improved upon by several regex implementations shown here.</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><ol type="1">
<li><a href="https://swtch.com/~rsc/regexp/regexp1.html">https://swtch.com/~rsc/regexp/regexp1.html</a></li>
<li><a href="http://www.cs.princeton.edu/courses/archive/spr09/cos333/beautiful.html">http://www.cs.princeton.edu/courses/archive/spr09/cos333/beautiful.html</a></li>
<li><a href="http://c-faq.com/lib/regex.html">http://c-faq.com/lib/regex.html</a></li>
</ol>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><h2>Bignum</h2>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"></div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References">Arbitrary precision arithmetic was investigated but it was decided instead to use floating point numbers and integers instead.</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><ol type="1">
<li><a href="https://github.com/antirez/sbignum">https://github.com/antirez/sbignum</a></li>
<li><a href="http://www.mit.edu/afs.new/athena/contrib/crypto/src/SSLeay-0.6.4/crypto/bn/bn_knuth.c">http://www.mit.edu/afs.new/athena/contrib/crypto/src/SSLeay-0.6.4/crypto/bn/bn_knuth.c</a></li>
<li><a href="https://www3.cs.stonybrook.edu/~skiena/392/programs/bignum.c">https://www3.cs.stonybrook.edu/~skiena/392/programs/bignum.c</a></li>
<li><a href="https://en.wikipedia.org/wiki/The_Art_of_Computer_Programming">https://en.wikipedia.org/wiki/The_Art_of_Computer_Programming</a></li>
</ol>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><h2>Hashes</h2>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"></div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References">A hashing library is provided along with the interpreter, the interpreter makes use of it.</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><ol type="1">
<li><a href="http://www.cse.yorku.ca/~oz/hash.html">http://www.cse.yorku.ca/~oz/hash.html</a></li>
<li><a href="https://en.wikipedia.org/wiki/Hash_table#Separate_chaining">https://en.wikipedia.org/wiki/Hash_table#Separate_chaining</a></li>
</ol>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><h2>String handling</h2>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"></div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References">Various string handling routines were adapted from the C-FAQ.</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><ol type="1">
<li><a href="http://c-faq.com/varargs/varargs1.html">http://c-faq.com/varargs/varargs1.html</a></li>
</ol>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><h2>Bit twiddling hacks</h2>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"></div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References">One routine from the "bignum" library that was left in that related to binary logarithms was derived from here:</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><ol type="1">
<li><a href="http://graphics.stanford.edu/~seander/bithacks.html">http://graphics.stanford.edu/~seander/bithacks.html</a></li>
</ol>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><h2>Line editing library</h2>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"></div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References">The line editing library used in this document was called "linenoise", which is a popular and minimal library for line editing released under a BSD license. I have since made (fairly minor) modifications to the library and added support for <a href="https://en.wikipedia.org/wiki/Vi">"Vi"</a> like editing and changed the API naming somewhat, the modified library has been used in this project.</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><ol type="1">
<li><a href="https://github.com/antirez/linenoise">https://github.com/antirez/linenoise</a></li>
<li><a href="https://github.com/howerj/libline">https://github.com/howerj/libline</a></li>
</ol>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><h2>Documentation</h2>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"></div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References">The CSS style sheet used in this document and the markdown to HTML converter used:</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References"><ol type="1">
<li><a href="http://bettermotherfuckingwebsite.com/">http://bettermotherfuckingwebsite.com/</a></li>
<li><a href="https://daringfireball.net/projects/markdown/">https://daringfireball.net/projects/markdown/</a></li>
</ol>
</div></div></div></div></div></div></div></div></div></div><div id="Introduction"><div id="Design goals"><div id="Documentation"><div id="Building"><div id="Deviations from other lisps"><div id="BUGS"><div id="To Do"><div id="Test programs"><div id="Manual"><div id="References">&lt;style type="text/css"&gt;body{margin:40px auto;max-width:650px;line-height:1.6;font-size:18px;color:#444;padding:0 10px}h1,h2,h3,h4,h5,h6{line-height:1.2}&lt;/style&gt; </div></div></div></div></div></div></div></div></div></div></div></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="footer">Generated on Sun Jan 10 2016 00:49:13 for liblisp by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
