<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.8.8"/>
<title>liblisp: repl.c Source File</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="navtree.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="resize.js"></script>
<script type="text/javascript" src="navtree.js"></script>
<script type="text/javascript">
  $(document).ready(initResizable);
  $(window).load(resizeHeight);
</script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/search.js"></script>
<script type="text/javascript">
  $(document).ready(function() { searchBox.OnSelectItem(0); });
</script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td style="padding-left: 0.5em;">
   <div id="projectname">liblisp
   &#160;<span id="projectnumber">v0.6</span>
   </div>
   <div id="projectbrief">A LISP interpreter and library</div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.8.8 -->
<script type="text/javascript">
var searchBox = new SearchBox("searchBox", "search",false,'Search');
</script>
  <div id="navrow1" class="tabs">
    <ul class="tablist">
      <li><a href="index.html"><span>Main&#160;Page</span></a></li>
      <li><a href="pages.html"><span>Related&#160;Pages</span></a></li>
      <li><a href="annotated.html"><span>Data&#160;Structures</span></a></li>
      <li class="current"><a href="files.html"><span>Files</span></a></li>
      <li>
        <div id="MSearchBox" class="MSearchBoxInactive">
        <span class="left">
          <img id="MSearchSelect" src="search/mag_sel.png"
               onmouseover="return searchBox.OnSearchSelectShow()"
               onmouseout="return searchBox.OnSearchSelectHide()"
               alt=""/>
          <input type="text" id="MSearchField" value="Search" accesskey="S"
               onfocus="searchBox.OnSearchFieldFocus(true)" 
               onblur="searchBox.OnSearchFieldFocus(false)" 
               onkeyup="searchBox.OnSearchFieldChange(event)"/>
          </span><span class="right">
            <a id="MSearchClose" href="javascript:searchBox.CloseResultsWindow()"><img id="MSearchCloseImg" border="0" src="search/close.png" alt=""/></a>
          </span>
        </div>
      </li>
    </ul>
  </div>
  <div id="navrow2" class="tabs2">
    <ul class="tablist">
      <li><a href="files.html"><span>File&#160;List</span></a></li>
      <li><a href="globals.html"><span>Globals</span></a></li>
    </ul>
  </div>
</div><!-- top -->
<div id="side-nav" class="ui-resizable side-nav-resizable">
  <div id="nav-tree">
    <div id="nav-tree-contents">
      <div id="nav-sync" class="sync"></div>
    </div>
  </div>
  <div id="splitbar" style="-moz-user-select:none;" 
       class="ui-resizable-handle">
  </div>
</div>
<script type="text/javascript">
$(document).ready(function(){initNavTree('repl_8c_source.html','');});
</script>
<div id="doc-content">
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
<a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(0)"><span class="SelectionMark">&#160;</span>All</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(1)"><span class="SelectionMark">&#160;</span>Data Structures</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(2)"><span class="SelectionMark">&#160;</span>Files</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(3)"><span class="SelectionMark">&#160;</span>Functions</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(4)"><span class="SelectionMark">&#160;</span>Variables</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(5)"><span class="SelectionMark">&#160;</span>Typedefs</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(6)"><span class="SelectionMark">&#160;</span>Enumerations</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(7)"><span class="SelectionMark">&#160;</span>Enumerator</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(8)"><span class="SelectionMark">&#160;</span>Macros</a><a class="SelectItem" href="javascript:void(0)" onclick="searchBox.OnSelectItem(9)"><span class="SelectionMark">&#160;</span>Pages</a></div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

<div class="header">
  <div class="headertitle">
<div class="title">repl.c</div>  </div>
</div><!--header-->
<div class="contents">
<a href="repl_8c.html">Go to the documentation of this file.</a><div class="fragment"><div class="line"><a name="l00001"></a><span class="lineno">    1</span>&#160;</div>
<div class="line"><a name="l00013"></a><span class="lineno">   13</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="liblisp_8h.html">liblisp.h</a>&quot;</span></div>
<div class="line"><a name="l00014"></a><span class="lineno">   14</span>&#160;<span class="preprocessor">#include &quot;<a class="code" href="private_8h.html">private.h</a>&quot;</span></div>
<div class="line"><a name="l00015"></a><span class="lineno">   15</span>&#160;<span class="preprocessor">#include &lt;stdlib.h&gt;</span></div>
<div class="line"><a name="l00016"></a><span class="lineno">   16</span>&#160;<span class="preprocessor">#include &lt;string.h&gt;</span></div>
<div class="line"><a name="l00017"></a><span class="lineno">   17</span>&#160;</div>
<div class="line"><a name="l00018"></a><span class="lineno"><a class="line" href="repl_8c.html#aadebe2487a2c5240ab6cd02c83add0bf">   18</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">char</span> *<a class="code" href="repl_8c.html#aadebe2487a2c5240ab6cd02c83add0bf">usage</a> = </div>
<div class="line"><a name="l00019"></a><span class="lineno">   19</span>&#160;     <span class="stringliteral">&quot;usage: %s (-[hcpEH])* (-[i\\-] file)* (-e string)* (-o file)* file* -\n&quot;</span>;</div>
<div class="line"><a name="l00020"></a><span class="lineno">   20</span>&#160;</div>
<div class="line"><a name="l00021"></a><span class="lineno"><a class="line" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5ad7951e5a5329a08134517b5d4ac0e874">   21</a></span>&#160;<span class="keyword">enum</span> {  <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5ad7951e5a5329a08134517b5d4ac0e874">go_switch</a>,           </div>
<div class="line"><a name="l00022"></a><span class="lineno"><a class="line" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a02df7e82587c02904d6e0f0c1ef0ae72">   22</a></span>&#160;        <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a02df7e82587c02904d6e0f0c1ef0ae72">go_in_file</a>,          </div>
<div class="line"><a name="l00023"></a><span class="lineno"><a class="line" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5af6d1449ff163bec0b66134df773d97d1">   23</a></span>&#160;        <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5af6d1449ff163bec0b66134df773d97d1">go_in_file_next_arg</a>, </div>
<div class="line"><a name="l00024"></a><span class="lineno"><a class="line" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a9c677c33057873248b57292305d9eda2">   24</a></span>&#160;        <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a9c677c33057873248b57292305d9eda2">go_out_file</a>,         </div>
<div class="line"><a name="l00025"></a><span class="lineno"><a class="line" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a6ec8760e00dba0ef3b75902ed1ebb7ca">   25</a></span>&#160;        <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a6ec8760e00dba0ef3b75902ed1ebb7ca">go_in_string</a>,        </div>
<div class="line"><a name="l00026"></a><span class="lineno"><a class="line" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5aad9c2a5998857ee608cd7b501f98c4d8">   26</a></span>&#160;        <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5aad9c2a5998857ee608cd7b501f98c4d8">go_in_stdin</a>,         </div>
<div class="line"><a name="l00027"></a><span class="lineno"><a class="line" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a314b779b06ae51bf21e09bae9eb8de42">   27</a></span>&#160;        <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a314b779b06ae51bf21e09bae9eb8de42">go_error</a>             </div>
<div class="line"><a name="l00028"></a><span class="lineno">   28</span>&#160;}; </div>
<div class="line"><a name="l00030"></a><span class="lineno"><a class="line" href="repl_8c.html#ab878811966513a9495c183767a1308e5">   30</a></span>&#160;<span class="keyword">static</span> <span class="keywordtype">int</span> <a class="code" href="repl_8c.html#ab878811966513a9495c183767a1308e5">getoptions</a>(<a class="code" href="structlisp.html">lisp</a> *l, <span class="keywordtype">char</span> *arg, <span class="keywordtype">char</span> *arg_0)</div>
<div class="line"><a name="l00031"></a><span class="lineno">   31</span>&#160;{ </div>
<div class="line"><a name="l00032"></a><span class="lineno">   32</span>&#160;        <span class="keywordtype">int</span> c;</div>
<div class="line"><a name="l00033"></a><span class="lineno">   33</span>&#160;        <span class="keywordflow">if</span>(<span class="charliteral">&#39;-&#39;</span> != *arg++) <span class="keywordflow">return</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a02df7e82587c02904d6e0f0c1ef0ae72">go_in_file</a>;</div>
<div class="line"><a name="l00034"></a><span class="lineno">   34</span>&#160;        <span class="keywordflow">if</span>(!arg[0]) <span class="keywordflow">return</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5aad9c2a5998857ee608cd7b501f98c4d8">go_in_stdin</a>;</div>
<div class="line"><a name="l00035"></a><span class="lineno">   35</span>&#160;        <span class="keywordflow">while</span>((c = *arg++))</div>
<div class="line"><a name="l00036"></a><span class="lineno">   36</span>&#160;                <span class="keywordflow">switch</span>(c) {</div>
<div class="line"><a name="l00037"></a><span class="lineno">   37</span>&#160;                <span class="keywordflow">case</span> <span class="charliteral">&#39;i&#39;</span>: <span class="keywordflow">case</span> <span class="charliteral">&#39;-&#39;</span>: <span class="keywordflow">return</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5af6d1449ff163bec0b66134df773d97d1">go_in_file_next_arg</a>;</div>
<div class="line"><a name="l00038"></a><span class="lineno">   38</span>&#160;                <span class="keywordflow">case</span> <span class="charliteral">&#39;h&#39;</span>: printf(<a class="code" href="repl_8c.html#aadebe2487a2c5240ab6cd02c83add0bf">usage</a>, arg_0); exit(0); <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00039"></a><span class="lineno">   39</span>&#160;                <span class="keywordflow">case</span> <span class="charliteral">&#39;c&#39;</span>: l-&gt;<a class="code" href="structlisp.html#aca148ada6e2dba2805afff8315f5b8c4">color_on</a>  = 1; <span class="keywordflow">break</span>; <span class="comment">/*colorize output*/</span></div>
<div class="line"><a name="l00040"></a><span class="lineno">   40</span>&#160;                <span class="keywordflow">case</span> <span class="charliteral">&#39;p&#39;</span>: l-&gt;<a class="code" href="structlisp.html#a21d83d341ca52af31afafe791fc5ab22">prompt_on</a> = 1; <span class="keywordflow">break</span>; <span class="comment">/*turn standard prompt when reading stdin*/</span></div>
<div class="line"><a name="l00041"></a><span class="lineno">   41</span>&#160;                <span class="keywordflow">case</span> <span class="charliteral">&#39;E&#39;</span>: l-&gt;<a class="code" href="structlisp.html#a229d1be456c4456d3e7c0e8ab87fcfdc">editor_on</a> = 1; <span class="keywordflow">break</span>; <span class="comment">/*turn line editor on when reading stdin*/</span></div>
<div class="line"><a name="l00042"></a><span class="lineno">   42</span>&#160;                <span class="keywordflow">case</span> <span class="charliteral">&#39;H&#39;</span>: l-&gt;<a class="code" href="structlisp.html#acdd8e70c22121a282ccde25f3b12172a">errors_halt</a> = 1; <span class="keywordflow">break</span>; </div>
<div class="line"><a name="l00043"></a><span class="lineno">   43</span>&#160;                <span class="keywordflow">case</span> <span class="charliteral">&#39;e&#39;</span>: <span class="keywordflow">return</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a6ec8760e00dba0ef3b75902ed1ebb7ca">go_in_string</a>; </div>
<div class="line"><a name="l00044"></a><span class="lineno">   44</span>&#160;                <span class="keywordflow">case</span> <span class="charliteral">&#39;o&#39;</span>: <span class="keywordflow">return</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a9c677c33057873248b57292305d9eda2">go_out_file</a>; </div>
<div class="line"><a name="l00045"></a><span class="lineno">   45</span>&#160;                <span class="keywordflow">default</span>:  fprintf(stderr, <span class="stringliteral">&quot;unknown option &#39;%c&#39;\n&quot;</span>, c);</div>
<div class="line"><a name="l00046"></a><span class="lineno">   46</span>&#160;                          fprintf(stderr, <a class="code" href="repl_8c.html#aadebe2487a2c5240ab6cd02c83add0bf">usage</a>, arg_0);</div>
<div class="line"><a name="l00047"></a><span class="lineno">   47</span>&#160;                          <span class="keywordflow">return</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a314b779b06ae51bf21e09bae9eb8de42">go_error</a>; </div>
<div class="line"><a name="l00048"></a><span class="lineno">   48</span>&#160;                }</div>
<div class="line"><a name="l00049"></a><span class="lineno">   49</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5ad7951e5a5329a08134517b5d4ac0e874">go_switch</a>; <span class="comment">/*this argument was a valid flag, nothing more*/</span></div>
<div class="line"><a name="l00050"></a><span class="lineno">   50</span>&#160;}</div>
<div class="line"><a name="l00051"></a><span class="lineno">   51</span>&#160;</div>
<div class="line"><a name="l00052"></a><span class="lineno"><a class="line" href="repl_8c.html#aaf05d705ed12223f41b0000c5466b699">   52</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="repl_8c.html#aaf05d705ed12223f41b0000c5466b699">lisp_repl</a>(<a class="code" href="structlisp.html">lisp</a> *l, <span class="keywordtype">char</span> *prompt, <span class="keywordtype">int</span> editor_on) {</div>
<div class="line"><a name="l00053"></a><span class="lineno">   53</span>&#160;        <a class="code" href="structcell.html">cell</a> *ret;</div>
<div class="line"><a name="l00054"></a><span class="lineno">   54</span>&#160;        <a class="code" href="structio.html">io</a> *ofp, *efp;</div>
<div class="line"><a name="l00055"></a><span class="lineno">   55</span>&#160;        <span class="keywordtype">char</span> *line = NULL;</div>
<div class="line"><a name="l00056"></a><span class="lineno">   56</span>&#160;        <span class="keywordtype">int</span> r = 0;</div>
<div class="line"><a name="l00057"></a><span class="lineno">   57</span>&#160;        ofp = <a class="code" href="liblisp_8h.html#a633ceecb1a76638b018e888697713087">lisp_get_output</a>(l);</div>
<div class="line"><a name="l00058"></a><span class="lineno">   58</span>&#160;        efp = <a class="code" href="liblisp_8h.html#a8e2c1e1ecb6040efd57ea0aad82892e2">lisp_get_logging</a>(l);</div>
<div class="line"><a name="l00059"></a><span class="lineno">   59</span>&#160;        ofp-&gt;<a class="code" href="structio.html#a3307c5ebb5155abb27f7ef55563652fb">pretty</a> = efp-&gt;<a class="code" href="structio.html#a3307c5ebb5155abb27f7ef55563652fb">pretty</a> = 1;</div>
<div class="line"><a name="l00060"></a><span class="lineno">   60</span>&#160;        ofp-&gt;<a class="code" href="structio.html#a85ff6a5aa4433a335e1260757e7edc7c">color</a>  = efp-&gt;<a class="code" href="structio.html#a85ff6a5aa4433a335e1260757e7edc7c">color</a>  = l-&gt;<a class="code" href="structlisp.html#aca148ada6e2dba2805afff8315f5b8c4">color_on</a>;</div>
<div class="line"><a name="l00061"></a><span class="lineno">   61</span>&#160;        <span class="keywordflow">if</span>((r = setjmp(l-&gt;<a class="code" href="structlisp.html#a8243fbb15016be94742550cbf81c78f4">recover</a>)) &lt; 0) {  <span class="comment">/*catch errors and &quot;sig&quot;*/</span></div>
<div class="line"><a name="l00062"></a><span class="lineno">   62</span>&#160;                l-&gt;<a class="code" href="structlisp.html#ab593f7fb61fa1731224f9a9c243ed549">recover_init</a> = 0;</div>
<div class="line"><a name="l00063"></a><span class="lineno">   63</span>&#160;                <span class="keywordflow">return</span> r; </div>
<div class="line"><a name="l00064"></a><span class="lineno">   64</span>&#160;        }</div>
<div class="line"><a name="l00065"></a><span class="lineno">   65</span>&#160;        l-&gt;<a class="code" href="structlisp.html#ab593f7fb61fa1731224f9a9c243ed549">recover_init</a> = 1;</div>
<div class="line"><a name="l00066"></a><span class="lineno">   66</span>&#160;        <span class="keywordflow">if</span>(editor_on &amp;&amp; l-&gt;<a class="code" href="structlisp.html#a28881f8aea39cd543a1793f16d56968d">editor</a>) { <span class="comment">/*handle line editing functionality*/</span></div>
<div class="line"><a name="l00067"></a><span class="lineno">   67</span>&#160;                <span class="keywordflow">while</span>((line = l-&gt;<a class="code" href="structlisp.html#a28881f8aea39cd543a1793f16d56968d">editor</a>(prompt))) {</div>
<div class="line"><a name="l00068"></a><span class="lineno">   68</span>&#160;                        <a class="code" href="structcell.html">cell</a> *prn; </div>
<div class="line"><a name="l00069"></a><span class="lineno">   69</span>&#160;                        <span class="keywordflow">if</span>(!line[strspn(line, <span class="stringliteral">&quot; \t\r\n&quot;</span>)]) { free(line); <span class="keywordflow">continue</span>; }</div>
<div class="line"><a name="l00070"></a><span class="lineno">   70</span>&#160;                        <span class="keywordflow">if</span>(!(prn = <a class="code" href="liblisp_8h.html#ae633d6fab07ed4f6d01bc37d60f11dfa">lisp_eval_string</a>(l, line))) {</div>
<div class="line"><a name="l00071"></a><span class="lineno">   71</span>&#160;                                free(line);</div>
<div class="line"><a name="l00072"></a><span class="lineno">   72</span>&#160;                                <a class="code" href="liblisp_8h.html#a04c5144998dee22d4151c410384952d2">RECOVER</a>(l, <span class="stringliteral">&quot;\&quot;%s\&quot;&quot;</span>, <span class="stringliteral">&quot;invalid or incomplete line&quot;</span>);</div>
<div class="line"><a name="l00073"></a><span class="lineno">   73</span>&#160;                        }</div>
<div class="line"><a name="l00074"></a><span class="lineno">   74</span>&#160;                        <a class="code" href="liblisp_8h.html#ae70299d6719a407556bc50df5a65a3f2">lisp_print</a>(l, prn);</div>
<div class="line"><a name="l00075"></a><span class="lineno">   75</span>&#160;                        free(line);</div>
<div class="line"><a name="l00076"></a><span class="lineno">   76</span>&#160;                        line = NULL;</div>
<div class="line"><a name="l00077"></a><span class="lineno">   77</span>&#160;                }</div>
<div class="line"><a name="l00078"></a><span class="lineno">   78</span>&#160;        } <span class="keywordflow">else</span> { <span class="comment">/*read from input with no special handling, or a file*/</span></div>
<div class="line"><a name="l00079"></a><span class="lineno">   79</span>&#160;                <span class="keywordflow">for</span>(;;){</div>
<div class="line"><a name="l00085"></a><span class="lineno">   85</span>&#160;                        <a class="code" href="liblisp_8h.html#a9474a02d053abd00ddc6734be551dd0f">lisp_printf</a>(l, ofp, 0, <span class="stringliteral">&quot;%s&quot;</span>, prompt);</div>
<div class="line"><a name="l00086"></a><span class="lineno">   86</span>&#160;                        <span class="keywordflow">if</span>(!(ret = <a class="code" href="private_8h.html#a040e4f3d86b914fa1a28f7e7bd3fd91a">reader</a>(l, <a class="code" href="liblisp_8h.html#a84ba89397c41b22cfc72eb43813f2e88">lisp_get_input</a>(l)))) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00087"></a><span class="lineno">   87</span>&#160;                        <span class="keywordflow">if</span>(!(ret = <a class="code" href="eval_8c.html#aee3c09262c4e325bb1b3495762cbfc34">eval</a>(l, 0, ret, l-&gt;<a class="code" href="structlisp.html#aaf21daa4d7627cc799cd7a56a39b320a">top_env</a>))) <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00088"></a><span class="lineno">   88</span>&#160;                        <a class="code" href="liblisp_8h.html#a9474a02d053abd00ddc6734be551dd0f">lisp_printf</a>(l, ofp, 0, <span class="stringliteral">&quot;%S\n&quot;</span>, ret);</div>
<div class="line"><a name="l00089"></a><span class="lineno">   89</span>&#160;                        l-&gt;<a class="code" href="structlisp.html#a7e65bb91cc62d0a494097281a6b3a5eb">gc_stack_used</a> = 0;</div>
<div class="line"><a name="l00090"></a><span class="lineno">   90</span>&#160;                }</div>
<div class="line"><a name="l00091"></a><span class="lineno">   91</span>&#160;        }</div>
<div class="line"><a name="l00092"></a><span class="lineno">   92</span>&#160;        l-&gt;<a class="code" href="structlisp.html#a7e65bb91cc62d0a494097281a6b3a5eb">gc_stack_used</a> = 0;</div>
<div class="line"><a name="l00093"></a><span class="lineno">   93</span>&#160;        l-&gt;<a class="code" href="structlisp.html#ab593f7fb61fa1731224f9a9c243ed549">recover_init</a> = 0;</div>
<div class="line"><a name="l00094"></a><span class="lineno">   94</span>&#160;        <span class="keywordflow">return</span> r;</div>
<div class="line"><a name="l00095"></a><span class="lineno">   95</span>&#160;}</div>
<div class="line"><a name="l00096"></a><span class="lineno">   96</span>&#160;</div>
<div class="line"><a name="l00097"></a><span class="lineno"><a class="line" href="repl_8c.html#ac4d74379bbd00ca83bbd9b034f89634d">   97</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="repl_8c.html#ac4d74379bbd00ca83bbd9b034f89634d">main_lisp_env</a>(<a class="code" href="structlisp.html">lisp</a> *l, <span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div>
<div class="line"><a name="l00098"></a><span class="lineno">   98</span>&#160;        <span class="keywordtype">int</span> i, stdin_off = 0;</div>
<div class="line"><a name="l00099"></a><span class="lineno">   99</span>&#160;        <a class="code" href="structcell.html">cell</a> *ob = l-&gt;nil;</div>
<div class="line"><a name="l00100"></a><span class="lineno">  100</span>&#160;        <span class="keywordflow">if</span>(!l) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00101"></a><span class="lineno">  101</span>&#160;        <span class="keywordflow">for</span>(i = argc - 1; i + 1 ; i--) <span class="comment">/*add command line args to list*/</span></div>
<div class="line"><a name="l00102"></a><span class="lineno">  102</span>&#160;                <span class="keywordflow">if</span>(!(ob = <a class="code" href="eval_8c.html#adff19797e567c3be25ea9e49b438e713">cons</a>(l, <a class="code" href="eval_8c.html#a87c86dd8ca95f47bfdd927462af3b522">mk_str</a>(l, <a class="code" href="liblisp_8h.html#ab1d088f82cf40fc45daefd8c667a30ac">lstrdup</a>(argv[i])), ob))) </div>
<div class="line"><a name="l00103"></a><span class="lineno">  103</span>&#160;                        <span class="keywordflow">return</span> -1; </div>
<div class="line"><a name="l00104"></a><span class="lineno">  104</span>&#160;        <span class="keywordflow">if</span>(!<a class="code" href="eval_8c.html#a7051b14e8916ee8be6ae107ae8b13756">extend_top</a>(l, <a class="code" href="eval_8c.html#a3953e85df7e0683572dadb22c4b3fc67">intern</a>(l, <a class="code" href="liblisp_8h.html#ab1d088f82cf40fc45daefd8c667a30ac">lstrdup</a>(<span class="stringliteral">&quot;args&quot;</span>)), ob))</div>
<div class="line"><a name="l00105"></a><span class="lineno">  105</span>&#160;                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00106"></a><span class="lineno">  106</span>&#160;        <span class="keywordflow">for</span>(i = 1; i &lt; argc; i++)</div>
<div class="line"><a name="l00107"></a><span class="lineno">  107</span>&#160;                <span class="keywordflow">switch</span>(<a class="code" href="repl_8c.html#ab878811966513a9495c183767a1308e5">getoptions</a>(l, argv[i], argv[0])) {</div>
<div class="line"><a name="l00108"></a><span class="lineno">  108</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5ad7951e5a5329a08134517b5d4ac0e874">go_switch</a>: <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00109"></a><span class="lineno">  109</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5aad9c2a5998857ee608cd7b501f98c4d8">go_in_stdin</a>: <span class="comment">/*read from standard input*/</span></div>
<div class="line"><a name="l00110"></a><span class="lineno">  110</span>&#160;                        <a class="code" href="io_8c.html#a0439d86f8148b6eb62d03b8b2053634f">io_close</a>(<a class="code" href="liblisp_8h.html#a84ba89397c41b22cfc72eb43813f2e88">lisp_get_input</a>(l));</div>
<div class="line"><a name="l00111"></a><span class="lineno">  111</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="liblisp_8h.html#a248bc82bf94ab5cf3638dc16706ef26c">lisp_set_input</a>(l, <a class="code" href="io_8c.html#af516ffa5ca8686e0516bb4bc49e51ef0">io_fin</a>(stdin)) &lt; 0)</div>
<div class="line"><a name="l00112"></a><span class="lineno">  112</span>&#160;                                <span class="keywordflow">return</span> perror(<span class="stringliteral">&quot;stdin&quot;</span>), -1;</div>
<div class="line"><a name="l00113"></a><span class="lineno">  113</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="repl_8c.html#aaf05d705ed12223f41b0000c5466b699">lisp_repl</a>(l, l-&gt;<a class="code" href="structlisp.html#a21d83d341ca52af31afafe791fc5ab22">prompt_on</a> ? <span class="stringliteral">&quot;&gt; &quot;</span>: <span class="stringliteral">&quot;&quot;</span>, l-&gt;<a class="code" href="structlisp.html#a229d1be456c4456d3e7c0e8ab87fcfdc">editor_on</a>) &lt; 0) </div>
<div class="line"><a name="l00114"></a><span class="lineno">  114</span>&#160;                                <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00115"></a><span class="lineno">  115</span>&#160;                        <a class="code" href="io_8c.html#a0439d86f8148b6eb62d03b8b2053634f">io_close</a>(<a class="code" href="liblisp_8h.html#a84ba89397c41b22cfc72eb43813f2e88">lisp_get_input</a>(l));</div>
<div class="line"><a name="l00116"></a><span class="lineno">  116</span>&#160;                        <a class="code" href="liblisp_8h.html#a248bc82bf94ab5cf3638dc16706ef26c">lisp_set_input</a>(l, NULL);</div>
<div class="line"><a name="l00117"></a><span class="lineno">  117</span>&#160;                        stdin_off = 1;</div>
<div class="line"><a name="l00118"></a><span class="lineno">  118</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00119"></a><span class="lineno">  119</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5af6d1449ff163bec0b66134df773d97d1">go_in_file_next_arg</a>: </div>
<div class="line"><a name="l00120"></a><span class="lineno">  120</span>&#160;                        <span class="keywordflow">if</span>(!(++i &lt; argc))</div>
<div class="line"><a name="l00121"></a><span class="lineno">  121</span>&#160;                                <span class="keywordflow">return</span> fprintf(stderr, <span class="stringliteral">&quot;-i and -- expects file\n&quot;</span>), -1;</div>
<div class="line"><a name="l00122"></a><span class="lineno">  122</span>&#160;                        <span class="comment">/*--- fall through ---*/</span></div>
<div class="line"><a name="l00123"></a><span class="lineno">  123</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a02df7e82587c02904d6e0f0c1ef0ae72">go_in_file</a>: <span class="comment">/*read from a file*/</span></div>
<div class="line"><a name="l00124"></a><span class="lineno">  124</span>&#160;                        <a class="code" href="io_8c.html#a0439d86f8148b6eb62d03b8b2053634f">io_close</a>(<a class="code" href="liblisp_8h.html#a84ba89397c41b22cfc72eb43813f2e88">lisp_get_input</a>(l));</div>
<div class="line"><a name="l00125"></a><span class="lineno">  125</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="liblisp_8h.html#a248bc82bf94ab5cf3638dc16706ef26c">lisp_set_input</a>(l, <a class="code" href="io_8c.html#af516ffa5ca8686e0516bb4bc49e51ef0">io_fin</a>(fopen(argv[i], <span class="stringliteral">&quot;rb&quot;</span>))) &lt; 0)</div>
<div class="line"><a name="l00126"></a><span class="lineno">  126</span>&#160;                                <span class="keywordflow">return</span> perror(argv[i]), -1;</div>
<div class="line"><a name="l00127"></a><span class="lineno">  127</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="repl_8c.html#aaf05d705ed12223f41b0000c5466b699">lisp_repl</a>(l, <span class="stringliteral">&quot;&quot;</span>, 0) &lt; 0) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00128"></a><span class="lineno">  128</span>&#160;                        <a class="code" href="io_8c.html#a0439d86f8148b6eb62d03b8b2053634f">io_close</a>(<a class="code" href="liblisp_8h.html#a84ba89397c41b22cfc72eb43813f2e88">lisp_get_input</a>(l));</div>
<div class="line"><a name="l00129"></a><span class="lineno">  129</span>&#160;                        <a class="code" href="liblisp_8h.html#a248bc82bf94ab5cf3638dc16706ef26c">lisp_set_input</a>(l, NULL);</div>
<div class="line"><a name="l00130"></a><span class="lineno">  130</span>&#160;                        stdin_off = 1;</div>
<div class="line"><a name="l00131"></a><span class="lineno">  131</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00132"></a><span class="lineno">  132</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a6ec8760e00dba0ef3b75902ed1ebb7ca">go_in_string</a>: <span class="comment">/*evaluate a string*/</span></div>
<div class="line"><a name="l00133"></a><span class="lineno">  133</span>&#160;                        <a class="code" href="io_8c.html#a0439d86f8148b6eb62d03b8b2053634f">io_close</a>(<a class="code" href="liblisp_8h.html#a84ba89397c41b22cfc72eb43813f2e88">lisp_get_input</a>(l));</div>
<div class="line"><a name="l00134"></a><span class="lineno">  134</span>&#160;                        <span class="keywordflow">if</span>(!(++i &lt; argc))</div>
<div class="line"><a name="l00135"></a><span class="lineno">  135</span>&#160;                                <span class="keywordflow">return</span> fprintf(stderr, <span class="stringliteral">&quot;-e expects arg\n&quot;</span>), -1;</div>
<div class="line"><a name="l00136"></a><span class="lineno">  136</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="liblisp_8h.html#a248bc82bf94ab5cf3638dc16706ef26c">lisp_set_input</a>(l, <a class="code" href="io_8c.html#af3b4d0c0839c477d9b03e23bf7e1a035">io_sin</a>(argv[i])) &lt; 0)</div>
<div class="line"><a name="l00137"></a><span class="lineno">  137</span>&#160;                                <span class="keywordflow">return</span> perror(argv[i]), -1;</div>
<div class="line"><a name="l00138"></a><span class="lineno">  138</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="repl_8c.html#aaf05d705ed12223f41b0000c5466b699">lisp_repl</a>(l, <span class="stringliteral">&quot;&quot;</span>, 0) &lt; 0) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00139"></a><span class="lineno">  139</span>&#160;                        <a class="code" href="io_8c.html#a0439d86f8148b6eb62d03b8b2053634f">io_close</a>(<a class="code" href="liblisp_8h.html#a84ba89397c41b22cfc72eb43813f2e88">lisp_get_input</a>(l));</div>
<div class="line"><a name="l00140"></a><span class="lineno">  140</span>&#160;                        <a class="code" href="liblisp_8h.html#a248bc82bf94ab5cf3638dc16706ef26c">lisp_set_input</a>(l, NULL);</div>
<div class="line"><a name="l00141"></a><span class="lineno">  141</span>&#160;                        stdin_off = 1;</div>
<div class="line"><a name="l00142"></a><span class="lineno">  142</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00143"></a><span class="lineno">  143</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a9c677c33057873248b57292305d9eda2">go_out_file</a>: <span class="comment">/*change the file to write to*/</span></div>
<div class="line"><a name="l00144"></a><span class="lineno">  144</span>&#160;                        <span class="keywordflow">if</span>(!(++i &lt; argc))</div>
<div class="line"><a name="l00145"></a><span class="lineno">  145</span>&#160;                                <span class="keywordflow">return</span> fprintf(stderr, <span class="stringliteral">&quot;-o expects arg\n&quot;</span>), -1;</div>
<div class="line"><a name="l00146"></a><span class="lineno">  146</span>&#160;                        <a class="code" href="io_8c.html#a0439d86f8148b6eb62d03b8b2053634f">io_close</a>(<a class="code" href="liblisp_8h.html#a633ceecb1a76638b018e888697713087">lisp_get_output</a>(l));</div>
<div class="line"><a name="l00147"></a><span class="lineno">  147</span>&#160;                        <a class="code" href="liblisp_8h.html#a82d1036090a6899c1921451dc226ac62">lisp_set_output</a>(l, NULL);</div>
<div class="line"><a name="l00148"></a><span class="lineno">  148</span>&#160;                        <span class="keywordflow">if</span>(<a class="code" href="liblisp_8h.html#a82d1036090a6899c1921451dc226ac62">lisp_set_output</a>(l, <a class="code" href="io_8c.html#af5eefb247fcb97b303c1d2db154db481">io_fout</a>(fopen(argv[i], <span class="stringliteral">&quot;wb&quot;</span>))) &lt; 0)</div>
<div class="line"><a name="l00149"></a><span class="lineno">  149</span>&#160;                                <span class="keywordflow">return</span> perror(argv[i]), -1;</div>
<div class="line"><a name="l00150"></a><span class="lineno">  150</span>&#160;                        <span class="keywordflow">break</span>;</div>
<div class="line"><a name="l00151"></a><span class="lineno">  151</span>&#160;                <span class="keywordflow">case</span> <a class="code" href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a314b779b06ae51bf21e09bae9eb8de42">go_error</a>:</div>
<div class="line"><a name="l00152"></a><span class="lineno">  152</span>&#160;                <span class="keywordflow">default</span>: exit(-1);</div>
<div class="line"><a name="l00153"></a><span class="lineno">  153</span>&#160;                }</div>
<div class="line"><a name="l00154"></a><span class="lineno">  154</span>&#160;        <span class="keywordflow">if</span>(!stdin_off)</div>
<div class="line"><a name="l00155"></a><span class="lineno">  155</span>&#160;                <span class="keywordflow">if</span>(<a class="code" href="repl_8c.html#aaf05d705ed12223f41b0000c5466b699">lisp_repl</a>(l, l-&gt;<a class="code" href="structlisp.html#a21d83d341ca52af31afafe791fc5ab22">prompt_on</a> ? <span class="stringliteral">&quot;&gt; &quot;</span>: <span class="stringliteral">&quot;&quot;</span>, l-&gt;<a class="code" href="structlisp.html#a229d1be456c4456d3e7c0e8ab87fcfdc">editor_on</a>) &lt; 0) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00156"></a><span class="lineno">  156</span>&#160;        <a class="code" href="liblisp_8h.html#aaf79906c159d433c932070b4e66ef4d6">lisp_destroy</a>(l);</div>
<div class="line"><a name="l00157"></a><span class="lineno">  157</span>&#160;        <span class="keywordflow">return</span> 0;</div>
<div class="line"><a name="l00158"></a><span class="lineno">  158</span>&#160;}</div>
<div class="line"><a name="l00159"></a><span class="lineno">  159</span>&#160;</div>
<div class="line"><a name="l00160"></a><span class="lineno"><a class="line" href="repl_8c.html#abc63aca7192434aee64d5b4776728610">  160</a></span>&#160;<span class="keywordtype">int</span> <a class="code" href="repl_8c.html#abc63aca7192434aee64d5b4776728610">main_lisp</a>(<span class="keywordtype">int</span> argc, <span class="keywordtype">char</span> **argv) {</div>
<div class="line"><a name="l00161"></a><span class="lineno">  161</span>&#160;        <a class="code" href="structlisp.html">lisp</a> *l;</div>
<div class="line"><a name="l00162"></a><span class="lineno">  162</span>&#160;        <span class="keywordflow">if</span>(!(l = <a class="code" href="liblisp_8h.html#a93eddb165896c5540ffbb89cf3bd045a">lisp_init</a>())) <span class="keywordflow">return</span> -1;</div>
<div class="line"><a name="l00163"></a><span class="lineno">  163</span>&#160;        <span class="keywordflow">return</span> <a class="code" href="repl_8c.html#ac4d74379bbd00ca83bbd9b034f89634d">main_lisp_env</a>(l, argc, argv);</div>
<div class="line"><a name="l00164"></a><span class="lineno">  164</span>&#160;}</div>
<div class="line"><a name="l00165"></a><span class="lineno">  165</span>&#160;</div>
<div class="ttc" id="structlisp_html_a21d83d341ca52af31afafe791fc5ab22"><div class="ttname"><a href="structlisp.html#a21d83d341ca52af31afafe791fc5ab22">lisp::prompt_on</a></div><div class="ttdeci">unsigned prompt_on</div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00193">private.h:193</a></div></div>
<div class="ttc" id="repl_8c_html_a99fb83031ce9923c84392b4e92f956b5a314b779b06ae51bf21e09bae9eb8de42"><div class="ttname"><a href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a314b779b06ae51bf21e09bae9eb8de42">go_error</a></div><div class="ttdef"><b>Definition:</b> <a href="repl_8c_source.html#l00027">repl.c:27</a></div></div>
<div class="ttc" id="liblisp_8h_html_ae633d6fab07ed4f6d01bc37d60f11dfa"><div class="ttname"><a href="liblisp_8h.html#ae633d6fab07ed4f6d01bc37d60f11dfa">lisp_eval_string</a></div><div class="ttdeci">LIBLISP_API cell * lisp_eval_string(lisp *l, const char *evalme)</div><div class="ttdoc">parse and evaluate a string, returning the result, it will however discard any input after the first ...</div><div class="ttdef"><b>Definition:</b> <a href="lisp_8c_source.html#l00096">lisp.c:96</a></div></div>
<div class="ttc" id="structlisp_html_a28881f8aea39cd543a1793f16d56968d"><div class="ttname"><a href="structlisp.html#a28881f8aea39cd543a1793f16d56968d">lisp::editor</a></div><div class="ttdeci">editor_func editor</div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00189">private.h:189</a></div></div>
<div class="ttc" id="liblisp_8h_html_aaf79906c159d433c932070b4e66ef4d6"><div class="ttname"><a href="liblisp_8h.html#aaf79906c159d433c932070b4e66ef4d6">lisp_destroy</a></div><div class="ttdeci">LIBLISP_API void lisp_destroy(lisp *l)</div><div class="ttdoc">destroy a lisp environment </div><div class="ttdef"><b>Definition:</b> <a href="lisp_8c_source.html#l00040">lisp.c:40</a></div></div>
<div class="ttc" id="structlisp_html_a7e65bb91cc62d0a494097281a6b3a5eb"><div class="ttname"><a href="structlisp.html#a7e65bb91cc62d0a494097281a6b3a5eb">lisp::gc_stack_used</a></div><div class="ttdeci">size_t gc_stack_used</div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00183">private.h:183</a></div></div>
<div class="ttc" id="io_8c_html_af516ffa5ca8686e0516bb4bc49e51ef0"><div class="ttname"><a href="io_8c.html#af516ffa5ca8686e0516bb4bc49e51ef0">io_fin</a></div><div class="ttdeci">io * io_fin(FILE *fin)</div><div class="ttdoc">read from a file </div><div class="ttdef"><b>Definition:</b> <a href="io_8c_source.html#l00179">io.c:179</a></div></div>
<div class="ttc" id="repl_8c_html_aadebe2487a2c5240ab6cd02c83add0bf"><div class="ttname"><a href="repl_8c.html#aadebe2487a2c5240ab6cd02c83add0bf">usage</a></div><div class="ttdeci">static char * usage</div><div class="ttdef"><b>Definition:</b> <a href="repl_8c_source.html#l00018">repl.c:18</a></div></div>
<div class="ttc" id="structio_html"><div class="ttname"><a href="structio.html">io</a></div><div class="ttdoc">A structure that is used to wrap up the I/O operations of the lisp interpreter. </div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00117">private.h:117</a></div></div>
<div class="ttc" id="repl_8c_html_ac4d74379bbd00ca83bbd9b034f89634d"><div class="ttname"><a href="repl_8c.html#ac4d74379bbd00ca83bbd9b034f89634d">main_lisp_env</a></div><div class="ttdeci">int main_lisp_env(lisp *l, int argc, char **argv)</div><div class="ttdoc">This is like the main_lisp function, however you can pass in an initialized lisp environment, and before this add functionality to the environment you want. </div><div class="ttdef"><b>Definition:</b> <a href="repl_8c_source.html#l00097">repl.c:97</a></div></div>
<div class="ttc" id="structlisp_html_a8243fbb15016be94742550cbf81c78f4"><div class="ttname"><a href="structlisp.html#a8243fbb15016be94742550cbf81c78f4">lisp::recover</a></div><div class="ttdeci">jmp_buf recover</div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00167">private.h:167</a></div></div>
<div class="ttc" id="structlisp_html"><div class="ttname"><a href="structlisp.html">lisp</a></div><div class="ttdoc">The state for a lisp interpreter, multiple such instances can run at the same time. It contains everything needed to run a complete lisp environment. </div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00166">private.h:166</a></div></div>
<div class="ttc" id="eval_8c_html_a7051b14e8916ee8be6ae107ae8b13756"><div class="ttname"><a href="eval_8c.html#a7051b14e8916ee8be6ae107ae8b13756">extend_top</a></div><div class="ttdeci">cell * extend_top(lisp *l, cell *sym, cell *val)</div><div class="ttdoc">Extend the top level lisp environment with a key value pair. </div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l00219">eval.c:219</a></div></div>
<div class="ttc" id="liblisp_8h_html"><div class="ttname"><a href="liblisp_8h.html">liblisp.h</a></div><div class="ttdoc">A minimal lisp interpreter and utility library. </div></div>
<div class="ttc" id="eval_8c_html_a87c86dd8ca95f47bfdd927462af3b522"><div class="ttname"><a href="eval_8c.html#a87c86dd8ca95f47bfdd927462af3b522">mk_str</a></div><div class="ttdeci">cell * mk_str(lisp *l, char *s)</div><div class="ttdoc">make lisp cell (string) from a string </div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l00153">eval.c:153</a></div></div>
<div class="ttc" id="structio_html_a85ff6a5aa4433a335e1260757e7edc7c"><div class="ttname"><a href="structio.html#a85ff6a5aa4433a335e1260757e7edc7c">io::color</a></div><div class="ttdeci">unsigned color</div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00128">private.h:128</a></div></div>
<div class="ttc" id="liblisp_8h_html_a04c5144998dee22d4151c410384952d2"><div class="ttname"><a href="liblisp_8h.html#a04c5144998dee22d4151c410384952d2">RECOVER</a></div><div class="ttdeci">#define RECOVER(LISP, FMT,...)</div><div class="ttdoc">Print out an error message and throw a lisp exception that can be recovered from. ...</div><div class="ttdef"><b>Definition:</b> <a href="liblisp_8h_source.html#l01450">liblisp.h:1450</a></div></div>
<div class="ttc" id="repl_8c_html_a99fb83031ce9923c84392b4e92f956b5a6ec8760e00dba0ef3b75902ed1ebb7ca"><div class="ttname"><a href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a6ec8760e00dba0ef3b75902ed1ebb7ca">go_in_string</a></div><div class="ttdef"><b>Definition:</b> <a href="repl_8c_source.html#l00025">repl.c:25</a></div></div>
<div class="ttc" id="private_8h_html"><div class="ttname"><a href="private_8h.html">private.h</a></div><div class="ttdoc">An internal header for the liblisp project, not for external use. It defines the internals of what ar...</div></div>
<div class="ttc" id="liblisp_8h_html_a248bc82bf94ab5cf3638dc16706ef26c"><div class="ttname"><a href="liblisp_8h.html#a248bc82bf94ab5cf3638dc16706ef26c">lisp_set_input</a></div><div class="ttdeci">LIBLISP_API int lisp_set_input(lisp *l, io *in)</div><div class="ttdoc">set the input for a lisp environment </div><div class="ttdef"><b>Definition:</b> <a href="lisp_8c_source.html#l00118">lisp.c:118</a></div></div>
<div class="ttc" id="liblisp_8h_html_a93eddb165896c5540ffbb89cf3bd045a"><div class="ttname"><a href="liblisp_8h.html#a93eddb165896c5540ffbb89cf3bd045a">lisp_init</a></div><div class="ttdeci">LIBLISP_API lisp * lisp_init(void)</div><div class="ttdoc">Initialize a lisp environment. By default it will read from stdin, print to stdout and log errors to ...</div><div class="ttdef"><b>Definition:</b> <a href="subr_8c_source.html#l00248">subr.c:248</a></div></div>
<div class="ttc" id="eval_8c_html_adff19797e567c3be25ea9e49b438e713"><div class="ttname"><a href="eval_8c.html#adff19797e567c3be25ea9e49b438e713">cons</a></div><div class="ttdeci">cell * cons(lisp *l, cell *x, cell *y)</div><div class="ttdoc">Create a new cons cell from a pair of values, this primitive is used to construct the basic data stru...</div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l00053">eval.c:53</a></div></div>
<div class="ttc" id="io_8c_html_a0439d86f8148b6eb62d03b8b2053634f"><div class="ttname"><a href="io_8c.html#a0439d86f8148b6eb62d03b8b2053634f">io_close</a></div><div class="ttdeci">int io_close(io *c)</div><div class="ttdoc">close a file, the stdin, stderr and stdout file streams will not be closed if associated with this I/...</div><div class="ttdef"><b>Definition:</b> <a href="io_8c_source.html#l00211">io.c:211</a></div></div>
<div class="ttc" id="repl_8c_html_a99fb83031ce9923c84392b4e92f956b5a9c677c33057873248b57292305d9eda2"><div class="ttname"><a href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a9c677c33057873248b57292305d9eda2">go_out_file</a></div><div class="ttdef"><b>Definition:</b> <a href="repl_8c_source.html#l00024">repl.c:24</a></div></div>
<div class="ttc" id="liblisp_8h_html_ab1d088f82cf40fc45daefd8c667a30ac"><div class="ttname"><a href="liblisp_8h.html#ab1d088f82cf40fc45daefd8c667a30ac">lstrdup</a></div><div class="ttdeci">LIBLISP_API char * lstrdup(const char *s)</div><div class="ttdoc">lstrdup for where it is not available, despite what POSIX thinks it is not OK to stick random junk in...</div><div class="ttdef"><b>Definition:</b> <a href="util_8c_source.html#l00031">util.c:31</a></div></div>
<div class="ttc" id="repl_8c_html_ab878811966513a9495c183767a1308e5"><div class="ttname"><a href="repl_8c.html#ab878811966513a9495c183767a1308e5">getoptions</a></div><div class="ttdeci">static int getoptions(lisp *l, char *arg, char *arg_0)</div><div class="ttdef"><b>Definition:</b> <a href="repl_8c_source.html#l00030">repl.c:30</a></div></div>
<div class="ttc" id="structcell_html"><div class="ttname"><a href="structcell.html">cell</a></div><div class="ttdoc">A tagged object representing all possible lisp data types. </div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00083">private.h:83</a></div></div>
<div class="ttc" id="repl_8c_html_abc63aca7192434aee64d5b4776728610"><div class="ttname"><a href="repl_8c.html#abc63aca7192434aee64d5b4776728610">main_lisp</a></div><div class="ttdeci">int main_lisp(int argc, char **argv)</div><div class="ttdoc">A full lisp interpreter environment in a function call. It will read from stdin by default and print ...</div><div class="ttdef"><b>Definition:</b> <a href="repl_8c_source.html#l00160">repl.c:160</a></div></div>
<div class="ttc" id="structlisp_html_aaf21daa4d7627cc799cd7a56a39b320a"><div class="ttname"><a href="structlisp.html#aaf21daa4d7627cc799cd7a56a39b320a">lisp::top_env</a></div><div class="ttdeci">cell * top_env</div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00171">private.h:171</a></div></div>
<div class="ttc" id="liblisp_8h_html_a633ceecb1a76638b018e888697713087"><div class="ttname"><a href="liblisp_8h.html#a633ceecb1a76638b018e888697713087">lisp_get_output</a></div><div class="ttdeci">LIBLISP_API io * lisp_get_output(lisp *l)</div><div class="ttdoc">get the output channel in use in a lisp environment </div><div class="ttdef"><b>Definition:</b> <a href="lisp_8c_source.html#l00140">lisp.c:140</a></div></div>
<div class="ttc" id="eval_8c_html_a3953e85df7e0683572dadb22c4b3fc67"><div class="ttname"><a href="eval_8c.html#a3953e85df7e0683572dadb22c4b3fc67">intern</a></div><div class="ttdeci">cell * intern(lisp *l, char *name)</div><div class="ttdoc">add a new symbol to the list of all symbols, two interned symbols containing the same name will compa...</div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l00202">eval.c:202</a></div></div>
<div class="ttc" id="structlisp_html_acdd8e70c22121a282ccde25f3b12172a"><div class="ttname"><a href="structlisp.html#acdd8e70c22121a282ccde25f3b12172a">lisp::errors_halt</a></div><div class="ttdeci">unsigned errors_halt</div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00193">private.h:193</a></div></div>
<div class="ttc" id="repl_8c_html_a99fb83031ce9923c84392b4e92f956b5af6d1449ff163bec0b66134df773d97d1"><div class="ttname"><a href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5af6d1449ff163bec0b66134df773d97d1">go_in_file_next_arg</a></div><div class="ttdef"><b>Definition:</b> <a href="repl_8c_source.html#l00023">repl.c:23</a></div></div>
<div class="ttc" id="repl_8c_html_a99fb83031ce9923c84392b4e92f956b5a02df7e82587c02904d6e0f0c1ef0ae72"><div class="ttname"><a href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5a02df7e82587c02904d6e0f0c1ef0ae72">go_in_file</a></div><div class="ttdef"><b>Definition:</b> <a href="repl_8c_source.html#l00022">repl.c:22</a></div></div>
<div class="ttc" id="repl_8c_html_aaf05d705ed12223f41b0000c5466b699"><div class="ttname"><a href="repl_8c.html#aaf05d705ed12223f41b0000c5466b699">lisp_repl</a></div><div class="ttdeci">int lisp_repl(lisp *l, char *prompt, int editor_on)</div><div class="ttdoc">a simple Read-Evaluate-Print-Loop (REPL) </div><div class="ttdef"><b>Definition:</b> <a href="repl_8c_source.html#l00052">repl.c:52</a></div></div>
<div class="ttc" id="liblisp_8h_html_ae70299d6719a407556bc50df5a65a3f2"><div class="ttname"><a href="liblisp_8h.html#ae70299d6719a407556bc50df5a65a3f2">lisp_print</a></div><div class="ttdeci">LIBLISP_API int lisp_print(lisp *l, cell *ob)</div><div class="ttdoc">print out an s-expression </div><div class="ttdef"><b>Definition:</b> <a href="lisp_8c_source.html#l00072">lisp.c:72</a></div></div>
<div class="ttc" id="liblisp_8h_html_a9474a02d053abd00ddc6734be551dd0f"><div class="ttname"><a href="liblisp_8h.html#a9474a02d053abd00ddc6734be551dd0f">lisp_printf</a></div><div class="ttdeci">LIBLISP_API int lisp_printf(lisp *l, io *o, unsigned depth, char *fmt,...)</div><div class="ttdoc">Formatted printing of lisp cells, colorized if color enabled on output stream, it can print out s-exp...</div><div class="ttdef"><b>Definition:</b> <a href="print_8c_source.html#l00053">print.c:53</a></div></div>
<div class="ttc" id="liblisp_8h_html_a84ba89397c41b22cfc72eb43813f2e88"><div class="ttname"><a href="liblisp_8h.html#a84ba89397c41b22cfc72eb43813f2e88">lisp_get_input</a></div><div class="ttdeci">LIBLISP_API io * lisp_get_input(lisp *l)</div><div class="ttdoc">get the input channel in use in a lisp environment </div><div class="ttdef"><b>Definition:</b> <a href="lisp_8c_source.html#l00139">lisp.c:139</a></div></div>
<div class="ttc" id="liblisp_8h_html_a82d1036090a6899c1921451dc226ac62"><div class="ttname"><a href="liblisp_8h.html#a82d1036090a6899c1921451dc226ac62">lisp_set_output</a></div><div class="ttdeci">LIBLISP_API int lisp_set_output(lisp *l, io *out)</div><div class="ttdoc">set the output for a lisp environment </div><div class="ttdef"><b>Definition:</b> <a href="lisp_8c_source.html#l00124">lisp.c:124</a></div></div>
<div class="ttc" id="private_8h_html_a040e4f3d86b914fa1a28f7e7bd3fd91a"><div class="ttname"><a href="private_8h.html#a040e4f3d86b914fa1a28f7e7bd3fd91a">reader</a></div><div class="ttdeci">cell * reader(lisp *l, io *i)</div><div class="ttdoc">Read in a lisp expression. </div><div class="ttdef"><b>Definition:</b> <a href="read_8c_source.html#l00131">read.c:131</a></div></div>
<div class="ttc" id="repl_8c_html_a99fb83031ce9923c84392b4e92f956b5ad7951e5a5329a08134517b5d4ac0e874"><div class="ttname"><a href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5ad7951e5a5329a08134517b5d4ac0e874">go_switch</a></div><div class="ttdef"><b>Definition:</b> <a href="repl_8c_source.html#l00021">repl.c:21</a></div></div>
<div class="ttc" id="liblisp_8h_html_a8e2c1e1ecb6040efd57ea0aad82892e2"><div class="ttname"><a href="liblisp_8h.html#a8e2c1e1ecb6040efd57ea0aad82892e2">lisp_get_logging</a></div><div class="ttdeci">LIBLISP_API io * lisp_get_logging(lisp *l)</div><div class="ttdoc">get the logging/error channel in use in a lisp environment </div><div class="ttdef"><b>Definition:</b> <a href="lisp_8c_source.html#l00141">lisp.c:141</a></div></div>
<div class="ttc" id="structio_html_a3307c5ebb5155abb27f7ef55563652fb"><div class="ttname"><a href="structio.html#a3307c5ebb5155abb27f7ef55563652fb">io::pretty</a></div><div class="ttdeci">unsigned pretty</div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00128">private.h:128</a></div></div>
<div class="ttc" id="io_8c_html_af3b4d0c0839c477d9b03e23bf7e1a035"><div class="ttname"><a href="io_8c.html#af3b4d0c0839c477d9b03e23bf7e1a035">io_sin</a></div><div class="ttdeci">io * io_sin(const char *sin)</div><div class="ttdoc">read from a string </div><div class="ttdef"><b>Definition:</b> <a href="io_8c_source.html#l00170">io.c:170</a></div></div>
<div class="ttc" id="structlisp_html_ab593f7fb61fa1731224f9a9c243ed549"><div class="ttname"><a href="structlisp.html#ab593f7fb61fa1731224f9a9c243ed549">lisp::recover_init</a></div><div class="ttdeci">unsigned recover_init</div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00193">private.h:193</a></div></div>
<div class="ttc" id="eval_8c_html_aee3c09262c4e325bb1b3495762cbfc34"><div class="ttname"><a href="eval_8c.html#aee3c09262c4e325bb1b3495762cbfc34">eval</a></div><div class="ttdeci">cell * eval(lisp *l, unsigned depth, cell *exp, cell *env)</div><div class="ttdoc">Evaluate a lisp expression. </div><div class="ttdef"><b>Definition:</b> <a href="eval_8c_source.html#l00282">eval.c:282</a></div></div>
<div class="ttc" id="structlisp_html_aca148ada6e2dba2805afff8315f5b8c4"><div class="ttname"><a href="structlisp.html#aca148ada6e2dba2805afff8315f5b8c4">lisp::color_on</a></div><div class="ttdeci">unsigned color_on</div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00193">private.h:193</a></div></div>
<div class="ttc" id="io_8c_html_af5eefb247fcb97b303c1d2db154db481"><div class="ttname"><a href="io_8c.html#af5eefb247fcb97b303c1d2db154db481">io_fout</a></div><div class="ttdeci">io * io_fout(FILE *fout)</div><div class="ttdoc">write to a file </div><div class="ttdef"><b>Definition:</b> <a href="io_8c_source.html#l00196">io.c:196</a></div></div>
<div class="ttc" id="structlisp_html_a229d1be456c4456d3e7c0e8ab87fcfdc"><div class="ttname"><a href="structlisp.html#a229d1be456c4456d3e7c0e8ab87fcfdc">lisp::editor_on</a></div><div class="ttdeci">unsigned editor_on</div><div class="ttdef"><b>Definition:</b> <a href="private_8h_source.html#l00193">private.h:193</a></div></div>
<div class="ttc" id="repl_8c_html_a99fb83031ce9923c84392b4e92f956b5aad9c2a5998857ee608cd7b501f98c4d8"><div class="ttname"><a href="repl_8c.html#a99fb83031ce9923c84392b4e92f956b5aad9c2a5998857ee608cd7b501f98c4d8">go_in_stdin</a></div><div class="ttdef"><b>Definition:</b> <a href="repl_8c_source.html#l00026">repl.c:26</a></div></div>
</div><!-- fragment --></div><!-- contents -->
</div><!-- doc-content -->
<!-- start footer part -->
<div id="nav-path" class="navpath"><!-- id is needed for treeview function! -->
  <ul>
    <li class="navelem"><a class="el" href="repl_8c.html">repl.c</a></li>
    <li class="footer">Generated on Sun Jan 10 2016 00:49:12 for liblisp by
    <a href="http://www.doxygen.org/index.html">
    <img class="footer" src="doxygen.png" alt="doxygen"/></a> 1.8.8 </li>
  </ul>
</div>
</body>
</html>
